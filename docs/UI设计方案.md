# OneStory UI设计方案与原型描述

## 一、设计系统概述

### 1.1 设计语言
- **风格定位**: 现代简约、专业创意
- **色彩体系**: 
  - 主色调: 基于Logo的品牌色
  - 辅助色: 中性灰色系 (#667085, #475467用于图标)
  - 背景色: 白色/浅灰为主
- **字体**: 系统字体,中文优先显示(zh-CN)
- **图标系统**: SVG矢量图标,支持多种主题

### 1.2 视觉元素
**Logo**: LogoOneStory (SVG格式)
**图标库**:
- 社交媒体: TikTok, Bilibili 图标
- 功能图标: Gem Stone (钻石/积分)
- 播放器控件: 播放/暂停/音量/全屏
- 编辑工具: 更多选项(三点菜单)

---

## 二、页面结构与原型

### 2.1 首页 (Landing Page)

#### 布局结构
```
┌─────────────────────────────────────────────────┐
│  [Logo OneStory]              [登录] [注册]      │
├─────────────────────────────────────────────────┤
│                                                 │
│            产品宣传视频区域                        │
│    ┌──────────────────────────────┐              │
│    │                              │              │
│    │   Showcase 展示视频播放器      │              │
│    │   (ShowcaseJmzf/LYX/etc.)    │              │
│    │                              │              │
│    └──────────────────────────────┘              │
│                                                 │
│      【AI驱动的视频故事板创作平台】                 │
│      【开始创作】按钮                              │
│                                                 │
├─────────────────────────────────────────────────┤
│                                                 │
│              特色案例展示区                        │
│  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐         │
│  │案例1 │  │案例2 │  │案例3 │  │案例4 │         │
│  │视频  │  │视频  │  │视频  │  │视频  │         │
│  └──────┘  └──────┘  └──────┘  └──────┘         │
│                                                 │
├─────────────────────────────────────────────────┤
│  Footer: [TikTok图标] [Bilibili图标]              │
│  统计代码 (百度统计/Amplitude)                     │
└─────────────────────────────────────────────────┘
```

#### 交互说明
1. **视频自动播放**: Showcase视频循环播放,吸引注意力
2. **悬停效果**: 案例视频卡片hover时显示详情
3. **快速注册**: 支持微信扫码登录

---

### 2.2 用户Dashboard (控制台)

#### 页面URL
- `/dashboard/`

#### 布局原型
```
┌─────────────────────────────────────────────────────────────┐
│ ┌─────────┐                          [头像] [💎钻石数] [消息]│
│ │ LOGO    │                                                 │
│ └─────────┘                                                 │
├─────────────────────────────────────────────────────────────┤
│ 侧边栏               主内容区域                              │
│ ┌──────┐  ┌─────────────────────────────────────────────┐  │
│ │我的项目│  │  搜索框 [🔍]         [+ 新建项目]            │  │
│ │      │  ├─────────────────────────────────────────────┤  │
│ │模板库 │  │  项目列表                                    │  │
│ │      │  │  ┌─────────────────────────────────────┐    │  │
│ │收益统计│  │  │ 新建项目2025-10-24_13:21             │    │  │
│ │      │  │  │ ┌────┐                              │    │  │
│ │帮助   │  │  │ │缩略图│ 最后编辑: 10分钟前            │    │  │
│ │      │  │  │ └────┘                              │    │  │
│ │设置   │  │  │ [编辑] [复制] [删除]                  │    │  │
│ │      │  │  └─────────────────────────────────────┘    │  │
│ └──────┘  │  ┌─────────────────────────────────────┐    │  │
│           │  │ 示例项目 - 产品宣传视频                │    │  │
│           │  │ ┌────┐                              │    │  │
│           │  │ │模板 │ 最后编辑: 2天前               │    │  │
│           │  │ └────┘                              │    │  │
│           │  │ [使用模板] [预览]                     │    │  │
│           │  └─────────────────────────────────────┘    │  │
│           │                                             │  │
│           │  分页: [<] 1 2 3 [>]                         │  │
│           └─────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

#### 组件说明
1. **顶部导航栏**
   - Logo (左侧)
   - 用户信息 (右侧):
     - 头像 (avatar.png)
     - 钻石/积分显示 (Gem Stone图标)
     - 消息提醒 (红点标记未读消息)

2. **侧边导航**
   - 我的项目 (默认选中)
   - 模板库
   - 收益统计 (/api/storyboard/project/benefit)
   - 帮助文档
   - 个人设置

3. **项目卡片**
   - 项目名称
   - 缩略图/封面
   - 最后编辑时间
   - 操作按钮组

---

### 2.3 故事板编辑器 (TableView模式)

#### 页面URL
- `/dashboard/{projectId}/tableView`
- 示例: `/dashboard/f6d162c030ddc58947585ce3925a8813/tableView`

#### 完整原型
```
┌───────────────────────────────────────────────────────────────────┐
│ [← 返回]  新建项目2025-10-24_13:21        [保存] [预览] [导出]       │
├───────────────────────────────────────────────────────────────────┤
│ 工具栏: [添加镜头] [删除选中] [AI批量生成] [导入文本]                 │
├───┬───────┬──────────┬────────────────┬────────┬────────┬────────┤
│ # │ 主角色 │  选择     │  场景描述        │  时长   │ 预览图  │ 操作   │
├───┼───────┼──────────┼────────────────┼────────┼────────┼────────┤
│ 1 │ [头像]│ [✓]      │ 一个女孩站在...   │ 3s     │ [图片] │ [⋮]   │
│   │ 小红  │          │                │        │        │        │
├───┼───────┼──────────┼────────────────┼────────┼────────┼────────┤
│ 2 │ [头像]│ [ ]      │ 镜头切换到产品... │ 5s     │ [图片] │ [⋮]   │
│   │ -    │          │                │        │        │        │
├───┼───────┼──────────┼────────────────┼────────┼────────┼────────┤
│ 3 │ [头像]│ [ ]      │ 特写产品细节...  │ 2s     │ [占位] │ [⋮]   │
│   │ -    │          │                │        │  图    │        │
├───┼───────┼──────────┼────────────────┼────────┼────────┼────────┤
│...│       │          │                │        │        │        │
└───┴───────┴──────────┴────────────────┴────────┴────────┴────────┘
│ [+ 添加新镜头]                              总时长: 10s            │
└───────────────────────────────────────────────────────────────────┘
```

#### 字段说明

**1. 序号列 (#)**
- 自动编号
- 支持拖拽排序

**2. 主角色列 (MainRoleCell组件)**
- 显示角色头像
- 角色名称
- 点击可编辑角色信息

**3. 选择列 (SelectCell组件)**
- 复选框
- 支持批量选择镜头
- 用于批量操作(删除、生成等)

**4. 场景描述列**
- 文本编辑框
- 支持多行输入
- AI提示(推荐描述关键词)
- 字数统计

**5. 时长列 (DurationCell组件)**
- 数字输入(秒)
- 预设选项: 2s / 3s / 5s
- 自动计算总时长

**6. 预览图列**
- 显示AI生成的图片
- 占位图(PlaceholderImg.jpg)用于未生成状态
- 点击放大预览
- 图片来源: `/generate_storyboard_images/...`

**7. 操作列**
- 更多菜单 (⋮ 图标)
  - 复制镜头
  - 删除镜头
  - 重新生成图片
  - 查看详情

#### 交互流程

**编辑流程**:
```
1. 用户输入场景描述
2. 点击"AI批量生成"
3. 后台调用 /api/storyboard/batch_txt2img
4. Worker轮询生成状态 (polling-Czxh5FTa.js)
5. 图片生成完成后自动更新预览图
6. 通过 /api/storyboard/fetch_shot 获取最新数据
```

**保存机制**:
- 自动保存: 每次编辑后3秒自动保存
- 手动保存: 点击顶部"保存"按钮
- 离线缓存: LocalStorage暂存未保存内容

---

### 2.4 视频预览播放器

#### 弹窗原型
```
┌─────────────────────────────────────────────┐
│              视频预览                     [×] │
├─────────────────────────────────────────────┤
│                                             │
│  ┌───────────────────────────────────────┐  │
│  │                                       │  │
│  │                                       │  │
│  │          视频播放区域                   │  │
│  │     (converted_videos/...)           │  │
│  │                                       │  │
│  │                                       │  │
│  └───────────────────────────────────────┘  │
│  ┌───────────────────────────────────────┐  │
│  │ [▶] ━━━━━━●━━━━━━ 00:05 / 00:10       │  │
│  │                        [🔊] [⛶]       │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  [下载视频] [分享到社交媒体] [关闭]            │
└─────────────────────────────────────────────┘
```

#### 播放器功能 (FilePlayer组件)
1. **播放控制**
   - 播放/暂停按钮 (SVG图标切换)
   - 进度条拖拽
   - 时间显示 (当前/总时长)

2. **音量控制**
   - 音量滑块
   - 静音切换

3. **全屏模式**
   - 全屏按钮
   - ESC退出全屏

4. **视频加载优化**
   - Range请求分段加载
   - 加载进度显示
   - 缓冲动画

---

## 三、组件设计规范

### 3.1 按钮组件

#### 主要按钮
```
┌───────────────┐
│  开始创作     │  ← 圆角矩形, 主色填充, 白色文字
└───────────────┘
```

#### 次要按钮
```
┌───────────────┐
│  取消         │  ← 圆角矩形, 边框样式, 灰色文字
└───────────────┘
```

#### 图标按钮
```
[⋮]  ← 更多菜单
[+]  ← 添加操作
[×]  ← 关闭/删除
```

### 3.2 输入框组件

#### 文本输入框
```
┌─────────────────────────────────┐
│ 请输入场景描述...                 │
└─────────────────────────────────┘
```
- 边框: 1px solid #E0E0E0
- 聚焦: 2px solid 主色
- 圆角: 4px

#### 下拉选择框
```
┌─────────────────────┬───┐
│ 请选择时长            │ ▼ │
└─────────────────────┴───┘
```

### 3.3 卡片组件

#### 项目卡片
```
┌─────────────────────────┐
│ ┌─────────────────────┐ │
│ │                     │ │
│ │   项目缩略图          │ │
│ │                     │ │
│ └─────────────────────┘ │
│ 项目标题                 │
│ 最后编辑: 时间            │
│ [编辑] [删除]            │
└─────────────────────────┘
```
- 阴影: 0 2px 8px rgba(0,0,0,0.1)
- Hover: 阴影加深 + 轻微上移

#### 模板卡片
```
┌─────────────────────────┐
│ ┌─────────────────────┐ │
│ │     🎬              │ │
│ │   模板封面视频        │ │
│ │                     │ │
│ └─────────────────────┘ │
│ 模板名称                 │
│ [使用模板] [预览]         │
└─────────────────────────┘
```

### 3.4 头像组件
```
┌──────┐
│ 👤   │  ← 圆形头像 (默认: avatar.png)
└──────┘
```
- 尺寸: 32px × 32px (小) / 48px × 48px (中) / 64px × 64px (大)
- 边框: 2px solid #fff (在深色背景上)

### 3.5 图标组件

**社交媒体图标** (24×24px):
- TikTok: SVG路径 (stroke: #667085)
- Bilibili: SVG路径 (fill: #667085)

**功能图标** (20×20px):
- Gem Stone (钻石): SVG
- 水滴图标: SVG (clip-path应用)

**播放器图标**:
- 播放: Base64 SVG (三角形)
- 暂停: Base64 SVG (双竖条)
- 音量: Base64 SVG
- 全屏: Base64 SVG

---

## 四、响应式设计

### 4.1 断点设置
```
- 手机:  < 768px
- 平板:  768px - 1024px
- 桌面:  > 1024px
```

### 4.2 布局适配

#### 桌面端 (当前主要支持)
- 最小宽度: 1280px
- 推荐分辨率: 1512×982 (基于分析数据)

#### 移动端 (优化方向)
- Dashboard: 侧边栏折叠为汉堡菜单
- TableView: 卡片式布局替代表格
- 视频播放器: 全屏优先

---

## 五、动效设计

### 5.1 页面过渡
- 路由切换: 淡入淡出 (300ms)
- 模态窗口: 缩放 + 淡入 (200ms)

### 5.2 交互反馈
- 按钮点击: 轻微缩放 (0.95) + 阴影变化
- 悬停: 颜色过渡 (150ms ease-in-out)
- 加载状态: 旋转动画 (循环)

### 5.3 数据更新
- 列表项添加: 从上滑入
- 列表项删除: 淡出 + 高度收缩
- 图片加载: 占位图 → 模糊 → 清晰

---

## 六、无障碍设计 (Accessibility)

### 6.1 键盘导航
- Tab键顺序: 符合逻辑流程
- 快捷键:
  - `Ctrl+S`: 保存项目
  - `Space`: 播放/暂停视频
  - `Esc`: 关闭模态窗口

### 6.2 屏幕阅读器支持
- 图片alt属性完善
- 按钮aria-label标注
- 语义化HTML标签

### 6.3 色彩对比
- 文字对比度 ≥ 4.5:1
- 重要按钮 ≥ 7:1

---

## 七、特殊状态设计

### 7.1 空状态
```
┌─────────────────────────────────┐
│                                 │
│         📋                      │
│    还没有项目                     │
│  [创建第一个项目]                  │
│                                 │
└─────────────────────────────────┘
```

### 7.2 加载状态
```
┌─────────────────────────────────┐
│         ⏳                       │
│    AI正在生成图像...              │
│    ━━━━━━━━━━ 60%               │
└─────────────────────────────────┘
```

### 7.3 错误状态
```
┌─────────────────────────────────┐
│         ⚠️                      │
│    图像生成失败                   │
│    请重试或联系客服                │
│    [重试] [报告问题]              │
└─────────────────────────────────┘
```

### 7.4 成功状态
```
┌─────────────────────────────────┐
│         ✓                       │
│    保存成功!                     │
│    (2秒后自动消失)                │
└─────────────────────────────────┘
```

---

## 八、资源文件清单

### 8.1 图标资源
- `LogoOneStory-3J2a39ff.svg` - 主Logo
- `Gem Stone-B3QWsY4-.svg` - 钻石图标
- 社交媒体图标 (inline SVG)
- 播放器图标 (Base64 SVG)

### 8.2 占位图
- `common/avatar.png` - 默认头像
- `common/PlaceholderImg.jpg` - 图片占位符

### 8.3 视频资源
- Showcase展示视频 (多个)
- 用户生成视频 (converted_videos/)

### 8.4 字体 (系统字体)
- 中文: -apple-system, "Microsoft YaHei"
- 英文: San Francisco, Segoe UI, Roboto

---

## 九、设计交付物

### 9.1 设计稿 (建议制作)
- Figma/Sketch源文件
- 各页面高保真原型
- 组件库 (Design System)

### 9.2 开发资产
- 切图资源 (SVG优先)
- 图标字体 (可选)
- CSS变量定义

### 9.3 设计规范文档
- 色彩规范
- 字体规范
- 间距规范 (8px基准)
- 圆角规范 (4px/8px/16px)

---

## 十、设计演进路线

### Phase 1: MVP (当前)
- ✅ 基础Dashboard
- ✅ TableView编辑器
- ✅ 视频播放器

### Phase 2: 增强
- ⏳ 移动端适配
- ⏳ 暗色模式
- ⏳ 自定义主题

### Phase 3: 高级
- ⬜ 实时协作UI
- ⬜ 3D视图模式
- ⬜ VR预览

---

**文档版本**: v1.0  
**设计工具**: 基于网络请求还原的UI结构  
**更新日期**: 2025-10-24  

此UI设计方案基于onestory.art的实际API调用和资源加载分析,提供了完整的原型描述和设计规范。实际设计时建议结合品牌视觉进行细化调整。
