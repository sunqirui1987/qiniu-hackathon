# OneStory 交互UI文档

## 一、文档概述

### 1.1 文档目的
本文档详细描述 OneStory 产品的用户界面交互设计,包括页面布局、组件交互行为、状态变化、用户操作流程等,为产品开发和设计团队提供完整的交互规范。

### 1.2 适用范围
- 产品设计师: 界面设计参考
- 前端开发: 交互实现指南
- 测试工程师: 测试用例编写
- 产品经理: 功能验收标准

### 1.3 设计原则
- **简洁性**: 界面清晰,操作直观
- **一致性**: 统一的交互模式和视觉语言
- **高效性**: 减少用户操作步骤
- **反馈性**: 及时的操作响应和状态提示

---

## 二、全局交互规范

### 2.1 导航系统

#### 顶部导航栏
**位置**: 固定在页面顶部
**组件构成**:
```
┌─────────────────────────────────────────────────────────┐
│ [Logo]                    [消息] [钻石数] [头像 ▼]       │
└─────────────────────────────────────────────────────────┘
```

**交互行为**:
1. **Logo点击**: 
   - 行为: 返回Dashboard首页
   - 动效: 无
   - 状态: 无激活态

2. **消息图标**:
   - 默认状态: 灰色图标
   - 有未读消息: 显示红色数字角标
   - 悬停: 图标颜色加深
   - 点击: 展开消息下拉菜单
   - 下拉菜单内容:
     ```
     ┌──────────────────────────┐
     │ 系统消息               [全部已读]│
     ├──────────────────────────┤
     │ • 您的视频已生成完成      │
     │   2分钟前                │
     ├──────────────────────────┤
     │ • 账户余额不足提醒        │
     │   1小时前                │
     ├──────────────────────────┤
     │ [查看全部消息]            │
     └──────────────────────────┘
     ```

3. **钻石数显示**:
   - 显示格式: 💎 1,234
   - 悬停: 显示"点击充值"提示
   - 点击: 跳转到充值页面

4. **用户头像下拉菜单**:
   - 点击头像展开菜单:
     ```
     ┌──────────────────┐
     │ 👤 用户名         │
     │ ID: 123696       │
     ├──────────────────┤
     │ 个人资料          │
     │ 账户设置          │
     │ 我的订阅          │
     │ 帮助文档          │
     ├──────────────────┤
     │ 退出登录          │
     └──────────────────┘
     ```

#### 侧边栏导航
**位置**: Dashboard页面左侧固定
**宽度**: 200px
**交互行为**:
- 默认展开状态
- 悬停菜单项: 背景色变化
- 选中状态: 左侧蓝色竖条 + 背景高亮
- 图标 + 文字组合显示

### 2.2 按钮交互规范

#### 主要按钮 (Primary Button)
**样式**: 品牌色填充,白色文字,圆角4px
**状态变化**:
```
默认态 → 悬停态 → 激活态 → 禁用态
━━━━   ━━━━━   ━━━━   ━━━━━
正常     阴影↑    缩放    灰色
        亮度↑    0.95×   不可点
```

**交互行为**:
1. **悬停 (Hover)**:
   - 阴影: 0 2px 8px → 0 4px 12px
   - 背景色: 亮度提升10%
   - 过渡: 150ms ease-in-out
   - 鼠标: 变为手型光标

2. **点击 (Active)**:
   - 缩放: transform: scale(0.95)
   - 持续时间: 100ms
   - 触发: 立即执行关联操作

3. **禁用 (Disabled)**:
   - 背景色: #CCCCCC
   - 文字颜色: #999999
   - 鼠标: 不可点击光标
   - 显示: opacity: 0.6

#### 次要按钮 (Secondary Button)
**样式**: 白色填充,边框,品牌色文字
**状态变化**: 与主要按钮类似,但颜色反转

#### 图标按钮
**常见类型**:
- `[⋮]` 更多菜单
- `[+]` 添加操作
- `[×]` 关闭/删除
- `[↻]` 刷新/重新生成

**交互行为**:
- 悬停: 图标缩放 1.1× + 颜色加深
- 点击: 旋转动画(刷新按钮) 或 直接执行

### 2.3 表单输入交互

#### 文本输入框
**默认状态**:
```
┌─────────────────────────────┐
│ 请输入...                    │
└─────────────────────────────┘
边框: 1px solid #E0E0E0
```

**聚焦状态**:
```
┌─────────────────────────────┐
│ |输入内容                     │
└─────────────────────────────┘
边框: 2px solid 主色调
显示光标闪烁
```

**错误状态**:
```
┌─────────────────────────────┐
│ 错误输入内容                  │
└─────────────────────────────┘
⚠️ 错误提示信息
边框: 2px solid #FF4444
```

**交互行为**:
1. **输入验证**: 实时校验,延迟500ms显示错误
2. **字数统计**: 显示已输入/最大字数 (如: 120/500)
3. **清空按钮**: 有内容时显示 `[×]` 图标,点击清空
4. **自动保存**: 输入停止3秒后触发自动保存

#### 下拉选择框
**默认显示**:
```
┌──────────────────┬───┐
│ 请选择...         │ ▼ │
└──────────────────┴───┘
```

**展开状态**:
```
┌──────────────────┬───┐
│ 选项1             │ ▲ │
├──────────────────┴───┤
│ ✓ 选项1 (已选中)      │
│   选项2               │
│   选项3               │
└───────────────────────┘
```

**交互行为**:
- 点击展开/收起下拉列表
- 悬停选项: 背景色高亮
- 选中: 显示对勾,下拉框更新显示值
- 键盘操作: 上下箭头选择,Enter确认

### 2.4 加载与反馈

#### 加载动画
**全局加载**:
```
┌─────────────────────┐
│                     │
│    ⏳ 加载中...      │
│    ⚪⚪⚪⚪⚪         │
│                     │
└─────────────────────┘
```
- 动画: 5个点依次放大缩小
- 遮罩: 半透明黑色背景
- 阻断操作: 禁止页面其他交互

**局部加载**:
```
[⟳] 加载中... (旋转图标)
```
- 仅在组件内显示
- 不阻断其他区域操作

#### 进度条
**AI生成进度**:
```
┌───────────────────────────────┐
│ AI正在生成图像... (2/5)        │
│ ━━━━━━━━━━━━━━ 40%            │
└───────────────────────────────┘
```
- 实时更新百分比
- 显示当前/总数
- 完成后自动消失

#### Toast提示
**成功提示**:
```
┌─────────────────┐
│ ✓ 保存成功!      │
└─────────────────┘
```
- 位置: 页面顶部居中
- 颜色: 绿色背景
- 持续: 2秒后淡出

**错误提示**:
```
┌─────────────────┐
│ ⚠️ 操作失败      │
│ [重试] [取消]    │
└─────────────────┘
```
- 位置: 页面顶部居中
- 颜色: 红色背景
- 持续: 5秒或手动关闭

**信息提示**:
```
┌─────────────────┐
│ ℹ️ 自动保存成功   │
└─────────────────┘
```
- 位置: 右下角
- 颜色: 蓝色背景
- 持续: 3秒后淡出

---

## 三、页面级交互详解

### 3.1 首页 (Landing Page)

#### 页面结构
```
[顶部导航: Logo + 登录/注册]
        ↓
[Hero区域: 宣传视频 + 主标题 + CTA按钮]
        ↓
[特色案例展示: 4个视频卡片]
        ↓
[Footer: 社交媒体链接]
```

#### 核心交互

**1. 宣传视频播放器**
- 自动播放: 页面加载后自动播放(静音)
- 循环播放: 视频结束后重新开始
- 悬停控制: 
  - 鼠标悬停显示播放控制条
  - 可手动暂停/播放
  - 可调整音量
- 点击视频: 全屏播放

**2. CTA按钮 "开始创作"**
- 位置: Hero区域底部居中
- 尺寸: 大号按钮 (180px × 48px)
- 动效: 轻微脉冲动画(呼吸效果)
- 点击行为:
  - 已登录 → 跳转到Dashboard
  - 未登录 → 弹出登录模态窗口

**3. 案例卡片交互**
```
默认状态: 
┌──────────────┐
│              │
│  缩略图       │
│              │
├──────────────┤
│ 案例标题      │
└──────────────┘

悬停状态:
┌──────────────┐
│   [▶]        │
│  视频播放     │
│              │
├──────────────┤
│ 案例标题      │
│ [查看详情]    │
└──────────────┘
```

**交互行为**:
- 鼠标移入: 
  - 卡片上浮4px
  - 阴影加深
  - 显示播放按钮遮罩
- 点击卡片: 打开案例详情模态窗口
- 点击播放: 在卡片内播放展示视频

**4. 登录模态窗口**
```
┌─────────────────────────────┐
│ 欢迎来到OneStory         [×] │
├─────────────────────────────┤
│                             │
│  ┌─────────────────────┐   │
│  │ 微信扫码登录         │   │
│  │                     │   │
│  │    [二维码]          │   │
│  │                     │   │
│  └─────────────────────┘   │
│                             │
│  或使用账号密码登录          │
│  ┌─────────────────────┐   │
│  │ 账号                │   │
│  └─────────────────────┘   │
│  ┌─────────────────────┐   │
│  │ 密码                │   │
│  └─────────────────────┘   │
│  [验证码组件]               │
│                             │
│  [登录]  还没有账号?[注册]   │
└─────────────────────────────┘
```

**交互流程**:
1. 用户点击"登录"按钮
2. 模态窗口从中心放大出现(200ms)
3. 默认显示微信登录tab
4. 切换到账号登录:
   - Tab切换动画
   - 表单淡入显示
5. 输入账号密码:
   - 实时验证格式
   - 错误显示红色提示
6. 加载验证码:
   - 阿里云验证码组件
   - 滑动拼图验证
7. 点击登录:
   - 按钮显示加载状态
   - 成功: 模态窗口淡出,跳转Dashboard
   - 失败: 显示错误消息,输入框抖动

### 3.2 Dashboard (项目控制台)

#### 页面布局
```
┌─────────────────────────────────────────────┐
│ [顶部导航栏]                                 │
├────────┬────────────────────────────────────┤
│        │ [搜索框]          [+ 新建项目]      │
│ 侧边栏 │                                    │
│        │ ┌──────┐ ┌──────┐ ┌──────┐        │
│ - 我的 │ │项目1 │ │项目2 │ │项目3 │        │
│   项目 │ └──────┘ └──────┘ └──────┘        │
│ - 模板 │                                    │
│ - 收益 │ ┌──────┐ ┌──────┐ ┌──────┐        │
│ - 帮助 │ │项目4 │ │项目5 │ │项目6 │        │
│ - 设置 │ └──────┘ └──────┘ └──────┘        │
│        │                                    │
│        │ [分页: < 1 2 3 >]                  │
└────────┴────────────────────────────────────┘
```

#### 核心交互

**1. 搜索框**
```
默认: [🔍] 搜索项目...
聚焦: [🔍] |光标
输入: [🔍] 关键词 [×]
```

**交互行为**:
- 点击: 聚焦输入框,清空提示文字
- 输入: 
  - 延迟800ms触发搜索
  - 显示清空按钮
  - 实时筛选下方项目卡片
- 搜索结果:
  - 匹配项高亮显示
  - 无结果显示空状态
  - 显示结果数量 (如: "找到3个项目")

**2. 新建项目按钮**
**位置**: 右上角固定
**点击行为**:
- 方式1: 创建空白项目
  - 显示"新建项目"对话框
  - 输入项目名称
  - 选择初始模板(可选)
  - 确认后跳转到编辑器
  
- 方式2: 从模板创建
  - 跳转到模板库
  - 选择模板后自动创建

**3. 项目卡片**
```
┌─────────────────────┐
│ ┌─────────────────┐ │
│ │   缩略图         │ │
│ └─────────────────┘ │
│ 新建项目2025-10-24  │
│ 最后编辑: 10分钟前   │
│ [编辑] [⋮]          │
└─────────────────────┘
```

**状态变化**:
- **默认态**: 正常显示
- **悬停态**: 
  - 卡片轻微上浮
  - 阴影加深
  - 操作按钮显示
- **选中态**: 蓝色边框高亮

**交互行为**:
- 单击卡片: 进入项目编辑器
- 双击缩略图: 预览项目视频
- 点击"编辑": 进入TableView编辑器
- 点击"⋮"更多菜单:
  ```
  ┌──────────────┐
  │ 重命名        │
  │ 复制项目      │
  │ 导出          │
  │ 移动到文件夹  │
  ├──────────────┤
  │ 删除项目      │
  └──────────────┘
  ```

**删除确认流程**:
1. 点击"删除项目"
2. 弹出确认对话框:
   ```
   ┌─────────────────────────┐
   │ ⚠️ 确认删除项目?          │
   │                         │
   │ 项目名: 新建项目2025-... │
   │ 此操作无法撤销           │
   │                         │
   │ [取消]  [确认删除]       │
   └─────────────────────────┘
   ```
3. 点击"确认删除":
   - 卡片淡出动画
   - 后续卡片平滑上移补位
   - 显示Toast: "项目已删除"

**4. 空状态显示**
当无项目时:
```
┌─────────────────────────────┐
│                             │
│         📋                  │
│    还没有项目                │
│  点击右上角创建第一个项目     │
│                             │
│    [+ 创建项目]              │
│                             │
└─────────────────────────────┘
```

**5. 侧边栏导航**
**交互行为**:
- 点击菜单项: 切换内容区域
- 选中状态: 左侧蓝色竖条 + 背景高亮
- 悬停: 背景色变浅

**模板库视图**:
- 按分类筛选 (categoryId)
- 模板卡片显示封面视频
- 点击"使用模板"创建项目副本

**收益统计视图**:
- 图表展示收益趋势
- 调用 `/api/storyboard/project/benefit`
- 可选时间范围筛选

### 3.3 故事板编辑器 (TableView)

#### 页面布局
```
┌───────────────────────────────────────────────────┐
│ [← 返回] 项目名称        [保存] [预览] [导出]      │
├───────────────────────────────────────────────────┤
│ [添加镜头] [删除选中] [AI批量生成] [导入文本]      │
├───┬───────┬──────┬─────────────┬─────┬──────┬────┤
│ # │ 主角色 │ 选择  │ 场景描述     │ 时长 │ 预览 │ 操作│
├───┼───────┼──────┼─────────────┼─────┼──────┼────┤
│ 1 │ [👤]  │ [✓] │ 女孩站立...  │ 3s  │[图] │[⋮]│
├───┼───────┼──────┼─────────────┼─────┼──────┼────┤
│ 2 │ [-]   │ [ ] │ 产品特写...  │ 5s  │[图] │[⋮]│
├───┼───────┼──────┼─────────────┼─────┼──────┼────┤
│...│       │      │             │     │      │    │
└───┴───────┴──────┴─────────────┴─────┴──────┴────┘
│ [+ 添加新镜头]                   总时长: 8s        │
└───────────────────────────────────────────────────┘
```

#### 工具栏交互

**1. 返回按钮**
- 点击行为:
  - 检测是否有未保存内容
  - 有未保存: 弹出确认对话框
    ```
    ┌──────────────────────┐
    │ 有未保存的更改        │
    │ [放弃] [保存并返回]   │
    └──────────────────────┘
    ```
  - 无未保存: 直接返回Dashboard

**2. 保存按钮**
- 默认: 灰色(已自动保存)
- 有修改: 蓝色高亮
- 点击: 
  - 立即保存到服务器
  - 显示加载动画
  - 成功: Toast提示 + 按钮变灰
  - 失败: 错误提示 + 保持高亮

**3. 预览按钮**
- 点击行为:
  - 检查是否有生成的图片
  - 无图片: 提示"请先生成图片"
  - 有图片: 
    - 调用 `/api/storyboard/generate_video`
    - 显示视频生成进度
    - 完成后打开视频播放器模态窗口

**4. 导出按钮**
- 点击显示导出选项菜单:
  ```
  ┌──────────────────┐
  │ 导出为视频 (.mp4) │
  │ 导出为PDF        │
  │ 导出为图片集     │
  │ 分享到社交平台   │
  └──────────────────┘
  ```

**5. 添加镜头按钮**
- 点击行为:
  - 在表格末尾插入新行
  - 自动聚焦到"场景描述"输入框
  - 序号自动递增
  - 时长默认3秒

**6. 删除选中按钮**
- 默认禁用(灰色)
- 有选中镜头时启用
- 点击:
  - 确认对话框
  - 批量删除选中行
  - 重新计算序号

**7. AI批量生成按钮**
- 默认禁用
- 条件: 至少选中1个镜头 且 有场景描述
- 点击流程:
  1. 收集选中镜头的描述
  2. 调用 `/api/storyboard/batch_txt2img`
  3. 显示生成进度模态窗口:
     ```
     ┌─────────────────────────┐
     │ AI图像生成中... (2/5)    │
     │ ━━━━━━━━━━ 40%         │
     │                         │
     │ 预计剩余时间: 30秒       │
     │                         │
     │ [最小化] [取消生成]      │
     └─────────────────────────┘
     ```
  4. 后台Worker轮询状态
  5. 生成完成:
     - 自动更新预览图
     - 显示成功Toast
     - 关闭进度窗口

**8. 导入文本按钮**
- 点击弹出导入对话框:
  ```
  ┌─────────────────────────────┐
  │ 导入故事板文本           [×] │
  ├─────────────────────────────┤
  │ 请粘贴文本,每行一个镜头:     │
  │ ┌─────────────────────────┐ │
  │ │ 1. 女孩站在窗前          │ │
  │ │ 2. 镜头切换到产品        │ │
  │ │ 3. 产品特写              │ │
  │ │                         │ │
  │ └─────────────────────────┘ │
  │                             │
  │ [取消]  [导入]              │
  └─────────────────────────────┘
  ```
- 导入行为:
  - 解析文本(支持编号或纯文本)
  - 批量创建镜头行
  - 自动填充场景描述

#### 表格交互详解

**1. 序号列 (#)**
- 只读显示
- 拖拽排序:
  - 鼠标移入显示拖拽手柄 `≡`
  - 拖拽时显示半透明行
  - 松开鼠标时插入新位置
  - 序号自动重新编号

**2. 主角色列 (MainRoleCell)**
```
默认:
┌──────┐
│ [-]  │  (无角色)
└──────┘

设置后:
┌──────┐
│ 👤   │
│ 小红 │
└──────┘
```

**交互行为**:
- 点击打开角色选择器:
  ```
  ┌──────────────────────┐
  │ 选择主角色        [×] │
  ├──────────────────────┤
  │ 常用角色:            │
  │ [👤 小红] [👤 小明]  │
  │                      │
  │ 或创建新角色:        │
  │ ┌──────────────────┐ │
  │ │ 角色名称          │ │
  │ └──────────────────┘ │
  │ [上传头像]           │
  │                      │
  │ [取消] [确定]        │
  └──────────────────────┘
  ```

**3. 选择列 (SelectCell)**
- 复选框交互:
  - 点击切换选中/取消
  - 选中行背景色高亮
  - 表头复选框: 全选/取消全选
- 批量操作:
  - 选中后启用工具栏批量按钮
  - 显示选中数量: "已选 3 项"

**4. 场景描述列**
```
空状态:
┌─────────────────────────────┐
│ 点击添加场景描述...          │
└─────────────────────────────┘

编辑中:
┌─────────────────────────────┐
│ 一个女孩站在窗前,阳光洒落... │
│                         50/500│
└─────────────────────────────┘
```

**交互行为**:
- 单击: 进入编辑模式
- 多行文本输入
- 字数统计: 实时显示
- 超出限制: 红色警告
- AI提示按钮:
  - 点击显示推荐关键词
  - 如: "试试添加: 光线、构图、情绪"
- 失焦: 自动保存

**5. 时长列 (DurationCell)**
```
┌──────┬───┐
│ 3s   │ ▼ │
└──────┴───┘
```

**交互行为**:
- 点击展开预设选项:
  - 2秒
  - 3秒 (常用)
  - 5秒
  - 自定义...
- 选择"自定义":
  - 弹出数字输入框
  - 范围: 1-30秒
  - 步进: 0.5秒
- 修改后:
  - 自动重新计算总时长
  - 底部显示: "总时长: XX秒"

**6. 预览图列**
```
未生成:
┌──────────┐
│          │
│ 占位图   │
│ [生成]   │
│          │
└──────────┘

已生成:
┌──────────┐
│          │
│ [AI图片] │
│          │
└──────────┘
```

**交互行为**:
- 未生成状态:
  - 显示占位图 (PlaceholderImg.jpg)
  - 悬停显示"生成图片"按钮
  - 点击: 单独生成此镜头
  
- 已生成状态:
  - 显示缩略图(压缩版)
  - 悬停: 显示操作按钮组
    - [🔍 放大预览]
    - [↻ 重新生成]
    - [↓ 下载]
  - 点击图片: 打开大图预览模态窗口

**大图预览模态窗口**:
```
┌─────────────────────────────┐
│                         [×] │
│   ┌─────────────────────┐   │
│   │                     │   │
│   │   高清预览图         │   │
│   │                     │   │
│   └─────────────────────┘   │
│                             │
│ [← 上一张]  1/5  [下一张 →] │
│ [重新生成] [下载原图]        │
└─────────────────────────────┘
```

**7. 操作列**
点击 `[⋮]` 展开菜单:
```
┌────────────────┐
│ 在上方插入镜头 │
│ 在下方插入镜头 │
│ 复制镜头       │
├────────────────┤
│ 重新生成图片   │
│ 编辑详情       │
├────────────────┤
│ 删除镜头       │
└────────────────┘
```

#### 底部状态栏
```
┌───────────────────────────────────────────┐
│ [+ 添加新镜头]                             │
│                                           │
│ 镜头总数: 5 | 总时长: 15秒 | 最后保存: 刚刚 │
└───────────────────────────────────────────┘
```

**实时更新**:
- 镜头总数: 增删镜头时更新
- 总时长: 修改任意时长时重新计算
- 最后保存时间: 
  - "刚刚" (< 1分钟)
  - "3分钟前" (1-60分钟)
  - "1小时前" (> 60分钟)

#### 自动保存机制
**触发条件**:
- 编辑任意字段后3秒
- 拖拽排序后立即
- 删除镜头后立即

**保存状态指示**:
```
保存中... ⏳
已保存 ✓
保存失败 ⚠️ [重试]
```

### 3.4 视频播放器

#### 播放器界面
```
┌─────────────────────────────────────────┐
│ 视频预览                             [×] │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │                                     │ │
│ │         视频播放区域                 │ │
│ │                                     │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│ ┌─────────────────────────────────────┐ │
│ │ [▶] ━━━━━━●━━━━━━ 00:05 / 00:15    │ │
│ │                    [🔊] [⛶]        │ │
│ └─────────────────────────────────────┘ │
│                                         │
│ [下载视频] [分享] [关闭]                 │
└─────────────────────────────────────────┘
```

#### 播放控制交互

**1. 播放/暂停按钮**
- 默认: 显示播放图标 `[▶]`
- 播放中: 切换为暂停图标 `[❚❚]`
- 点击: 切换播放状态
- 快捷键: 空格键

**2. 进度条**
**组成**:
- 灰色背景条(总长度)
- 蓝色已播放条
- 浅蓝色缓冲条
- 圆形拖拽手柄

**交互行为**:
- 悬停: 显示预览缩略图(如果支持)
- 点击: 跳转到指定位置
- 拖拽:
  - 显示时间提示 (如: "00:08")
  - 松开鼠标: 跳转播放
- 实时更新: 播放位置自动移动

**3. 时间显示**
- 格式: `当前时间 / 总时长`
- 示例: `00:05 / 00:15`
- 单位: 分:秒

**4. 音量控制**
```
默认:
[🔊]

悬停展开:
[🔊] ━━━●━━━ 70%
     音量滑块
```

**交互行为**:
- 点击图标: 静音/取消静音
- 拖拽滑块: 调整音量 (0-100%)
- 音量等级图标变化:
  - 0%: [🔇] 静音
  - 1-50%: [🔉] 低音量
  - 51-100%: [🔊] 高音量

**5. 全屏按钮**
- 点击: 进入全屏模式
- 全屏状态:
  - 视频铺满屏幕
  - 控制条自动隐藏(悬停显示)
  - 按钮变为退出全屏 `[⛶]`
- 退出: 
  - 点击退出按钮
  - 按ESC键
  - 双击视频

**6. 视频区域交互**
- 单击: 播放/暂停
- 双击: 进入/退出全屏
- 鼠标移动: 显示控制条
- 鼠标离开3秒: 控制条淡出

#### 视频加载状态

**加载中**:
```
┌─────────────────┐
│                 │
│    ⏳           │
│  加载中... 45%  │
│  ━━━━━━━━━━     │
│                 │
└─────────────────┘
```

**缓冲中**:
- 视频暂停
- 显示旋转加载图标
- 进度条显示缓冲范围

**加载失败**:
```
┌─────────────────┐
│                 │
│    ⚠️           │
│  视频加载失败    │
│  [重试]         │
│                 │
└─────────────────┘
```

#### 底部操作栏

**1. 下载视频按钮**
- 点击:
  - 检查视频是否生成完成
  - 完成: 触发文件下载
  - 未完成: 提示"视频生成中,请稍后"
- 下载进度:
  ```
  下载中... ━━━━━━━━━━ 60%
  ```

**2. 分享按钮**
点击展开分享选项:
```
┌────────────────┐
│ 复制链接       │
│ 分享到TikTok   │
│ 分享到Bilibili │
│ 生成二维码     │
└────────────────┘
```

**分享交互**:
- 复制链接: 
  - 复制到剪贴板
  - Toast提示 "链接已复制"
- 分享到社交平台:
  - 打开对应平台分享窗口
  - 预填标题和描述
- 生成二维码:
  - 显示二维码图片
  - 可下载或直接扫描

---

## 四、特殊场景交互

### 4.1 错误处理

#### 网络错误
```
┌──────────────────────┐
│ ⚠️ 网络连接失败       │
│ 请检查您的网络连接    │
│ [重试] [稍后]         │
└──────────────────────┘
```

**行为**:
- 自动重试3次
- 失败后显示提示
- 保留用户输入数据(LocalStorage)

#### API错误
**401 未授权**:
- 清除本地Token
- 显示"登录已过期"提示
- 3秒后跳转登录页

**403 禁止访问**:
- 显示"权限不足"提示
- 返回上一页

**500 服务器错误**:
- 显示"服务器繁忙"提示
- 提供"反馈问题"链接

#### AI生成失败
```
┌──────────────────────────┐
│ ⚠️ 图像生成失败           │
│                          │
│ 可能原因:                │
│ • 场景描述不符合规范      │
│ • 服务器繁忙              │
│                          │
│ [修改描述] [重新生成]     │
│ [查看示例] [联系客服]     │
└──────────────────────────┘
```

**内容审核未通过**:
```
┌──────────────────────────┐
│ ⚠️ 内容包含敏感词汇       │
│                          │
│ 请修改以下镜头描述:       │
│ • 第3镜头                │
│ • 第5镜头                │
│                          │
│ [查看详情] [修改]         │
└──────────────────────────┘
```

- 高亮问题镜头
- 提供修改建议
- 修改后可重新提交

### 4.2 离线模式

**检测到离线**:
```
┌──────────────────────────┐
│ 📡 您已离线               │
│ 编辑内容已保存到本地      │
│ 网络恢复后将自动同步      │
└──────────────────────────┘
```

**功能限制**:
- ✓ 可以编辑场景描述
- ✓ 可以调整镜头顺序
- ✗ 不能AI生成图片
- ✗ 不能预览视频

**重新上线**:
- 自动检测网络恢复
- 后台同步本地数据
- 成功: Toast提示"同步完成"
- 冲突: 显示版本选择

### 4.3 配额不足

**钻石余额不足**:
```
┌──────────────────────────┐
│ 💎 钻石余额不足           │
│                          │
│ 当前余额: 10             │
│ 本次消耗: 50             │
│ 还需: 40                 │
│                          │
│ [充值] [查看套餐]         │
└──────────────────────────┘
```

**每日生成限额**:
```
┌──────────────────────────┐
│ ⏰ 今日生成次数已用完     │
│                          │
│ 已使用: 10/10            │
│ 重置时间: 明天 00:00     │
│                          │
│ [升级VIP] [了解详情]      │
└──────────────────────────┘
```

### 4.4 数据冲突

**多设备编辑冲突**:
```
┌──────────────────────────┐
│ ⚠️ 检测到版本冲突         │
│                          │
│ 此项目在其他设备上有更新  │
│                          │
│ [使用服务器版本]          │
│ [使用本地版本]            │
│ [查看差异]                │
└──────────────────────────┘
```

**版本对比视图**:
```
┌─────────────────────────────────────┐
│ 服务器版本       |    本地版本       │
├─────────────────────────────────────┤
│ 镜头1: 女孩...   |  镜头1: 女孩...   │
│ 镜头2: 产品A     |  镜头2: 产品B  ← │
│ 镜头3: 特写      |  镜头3: 特写      │
├─────────────────────────────────────┤
│ 修改时间: 5分钟前 | 修改时间: 刚刚     │
└─────────────────────────────────────┘
[选择服务器版本] [选择本地版本] [合并]
```

---

## 五、辅助功能与快捷键

### 5.1 键盘快捷键

#### 全局快捷键
- `Ctrl + S` / `Cmd + S`: 保存
- `Ctrl + Z` / `Cmd + Z`: 撤销
- `Ctrl + Shift + Z` / `Cmd + Shift + Z`: 重做
- `Esc`: 关闭模态窗口
- `Ctrl + F` / `Cmd + F`: 搜索

#### 编辑器快捷键
- `Ctrl + N`: 新建镜头
- `Ctrl + D`: 复制当前镜头
- `Delete`: 删除选中镜头
- `↑` / `↓`: 选择上/下镜头
- `Enter`: 进入编辑模式
- `Tab`: 切换到下一个字段
- `Shift + Tab`: 切换到上一个字段

#### 视频播放器快捷键
- `Space`: 播放/暂停
- `←` / `→`: 快退/快进 5秒
- `↑` / `↓`: 增加/减少音量
- `M`: 静音/取消静音
- `F`: 全屏/退出全屏

### 5.2 拖拽交互

**支持拖拽的元素**:
1. **镜头行拖拽排序**
   - 拖拽手柄: `≡`
   - 拖拽时显示半透明行
   - 可拖拽到目标位置

2. **文件拖拽上传**
   - 拖拽图片到预览图区域
   - 替换AI生成图片
   - 支持的格式: JPG, PNG

3. **视频进度条拖拽**
   - 拖拽圆形手柄
   - 显示实时预览

### 5.3 多选操作

**表格多选**:
- 点击复选框: 单选
- `Shift + 点击`: 范围选择
- `Ctrl/Cmd + 点击`: 多选
- 全选: 点击表头复选框

**批量操作**:
- 删除: 删除选中的所有镜头
- 生成: 批量生成选中镜头的图片
- 复制: 批量复制镜头

---

## 六、响应式适配

### 6.1 桌面端 (> 1024px)
- 完整功能显示
- 侧边栏固定展开
- 表格横向滚动

### 6.2 平板端 (768px - 1024px)
- 侧边栏可折叠
- 表格部分列隐藏
- 操作菜单合并

### 6.3 移动端 (< 768px)
**Dashboard适配**:
```
┌──────────────────┐
│ ☰  Logo     [👤] │
├──────────────────┤
│ [搜索框]  [+]    │
├──────────────────┤
│ ┌──────────────┐ │
│ │  项目卡片    │ │
│ └──────────────┘ │
│ ┌──────────────┐ │
│ │  项目卡片    │ │
│ └──────────────┘ │
└──────────────────┘
```

**编辑器适配**:
- 表格改为卡片布局:
```
┌──────────────────┐
│ 镜头 #1      [⋮] │
├──────────────────┤
│ 主角色: 小红      │
│ 时长: 3秒         │
│ ┌──────────────┐ │
│ │  预览图      │ │
│ └──────────────┘ │
│ 场景描述:         │
│ 女孩站在窗前...   │
└──────────────────┘
```

---

## 七、性能优化交互

### 7.1 懒加载
- 项目列表: 滚动加载更多
- 图片: 进入可视区域才加载
- 视频: 点击播放时才加载

### 7.2 预加载
- 悬停项目卡片: 预加载项目详情
- 编辑器: 预加载下一镜头的图片

### 7.3 缓存策略
- 已访问项目: 缓存30分钟
- 用户信息: 缓存到退出登录
- 模板列表: 缓存24小时

---

## 八、交互动效时序

### 8.1 动画时长标准
- 瞬间反馈: 100ms
- 快速过渡: 200ms
- 标准过渡: 300ms
- 慢速过渡: 500ms

### 8.2 缓动函数
- 进入: ease-out
- 退出: ease-in
- 双向: ease-in-out
- 弹性: cubic-bezier(0.68, -0.55, 0.265, 1.55)

---

**文档版本**: v1.0  
**更新日期**: 2025-10-24  
**维护者**: OneStory产品团队

此文档基于 onestory.art 的实际API分析和UI还原,提供完整的交互设计规范。
