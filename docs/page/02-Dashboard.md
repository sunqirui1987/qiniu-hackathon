# Dashboard 页面（控制台）

## 页面标识
- **页面名称**: Dashboard / 控制台 / 工作台
- **URL路径**: `/dashboard/`
- **页面类型**: 用户工作空间
- **访问权限**: 需要登录

---

## 页面目标
1. 展示用户所有项目
2. 提供项目创建、编辑、删除功能
3. 访问模板库
4. 查看收益统计
5. 管理用户设置

---

## 布局结构

### 整体布局（双栏布局）
```
┌─────────────────────────────────────────────────────────────┐
│                        顶部导航栏                             │
├───────────┬─────────────────────────────────────────────────┤
│           │                                                 │
│           │                                                 │
│  侧边栏   │              主内容区域                          │
│           │                                                 │
│           │                                                 │
└───────────┴─────────────────────────────────────────────────┘
```

---

## 组件详细设计

### 1. 顶部导航栏

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│ [Logo]                              [头像] [💎100] [🔔]      │
└─────────────────────────────────────────────────────────────┘
```

#### 组件元素

**Logo**:
```
资源: LogoOneStory-3J2a39ff.svg
尺寸: 高度36px
位置: 左侧，距离边缘24px
交互: 点击返回Dashboard首页
```

**用户信息区域**（右侧）:

1. **用户头像**:
   ```
   默认图片: common/avatar.png
   尺寸: 32px × 32px（圆形）
   边框: 2px solid transparent
   悬停: 边框变为主色
   点击: 打开用户菜单下拉框
   ```

   下拉菜单:
   ```
   ┌─────────────────┐
   │ 个人资料         │
   │ 账户设置         │
   │ ───────────     │
   │ 退出登录         │
   └─────────────────┘
   ```

2. **钻石/积分显示**:
   ```
   图标: Gem Stone-B3QWsY4-.svg
   尺寸: 20px × 20px
   数字: 16px，Medium，#1A1A1A
   布局: 图标 + 数字（水平排列）
   间距: 图标与数字间隔4px
   交互: 点击查看积分详情
   ```

3. **消息通知图标**:
   ```
   图标: 铃铛SVG
   尺寸: 20px × 20px
   红点标记: 
     - 有未读消息时显示
     - 尺寸: 8px × 8px（圆形）
     - 颜色: #F04438（红色）
     - 位置: 图标右上角
   交互: 点击打开消息面板
   ```

#### 样式规范
```css
高度: 64px
背景色: #FFFFFF
边框: 1px solid #E4E7EC（底部）
内边距: 0 24px
z-index: 1000（固定在顶部）
```

---

### 2. 侧边栏

#### 布局
```
┌───────────┐
│ 我的项目   │ ← 选中状态
│ 模板库     │
│ 收益统计   │
│ 帮助文档   │
│ 个人设置   │
│           │
│   ...     │
│           │
└───────────┘
```

#### 组件元素

**导航菜单项**:

结构:
```
┌───────────────────┐
│ [图标] 菜单名称    │
└───────────────────┘
```

样式规范:
```css
宽度: 240px
高度: 48px
内边距: 12px 16px
圆角: 8px
字号: 14px
字重: Medium

默认状态:
  背景色: transparent
  文字颜色: #667085
  
悬停状态:
  背景色: #F9FAFB
  文字颜色: #344054
  
选中状态:
  背景色: #F0F5FF（主色浅色）
  文字颜色: 主色
  左边框: 3px solid 主色
```

**菜单列表**:

1. **我的项目**（默认选中）
   - 图标: 文件夹图标
   - 功能: 显示所有用户项目

2. **模板库**
   - 图标: 网格图标
   - 功能: 浏览和使用模板
   - 端点: `/api/project/template/list?categoryId=1`

3. **收益统计**
   - 图标: 图表图标
   - 功能: 查看项目收益数据
   - 端点: `/api/storyboard/project/benefit`

4. **帮助文档**
   - 图标: 问号图标
   - 功能: 打开帮助中心

5. **个人设置**
   - 图标: 齿轮图标
   - 功能: 用户设置页面

#### 侧边栏底部
```
┌───────────────────┐
│ 版本信息 v1.0      │
└───────────────────┘
```

---

### 3. 主内容区域

#### 顶部工具栏
```
┌─────────────────────────────────────────────────────────────┐
│ [🔍 搜索项目...]                              [+ 新建项目]    │
└─────────────────────────────────────────────────────────────┘
```

**搜索框**:
```
宽度: 320px
高度: 40px
占位符: "搜索项目..."
图标: 搜索图标（左侧）
边框: 1px solid #D0D5DD
圆角: 8px
功能: 实时搜索项目名称
```

**新建项目按钮**:
```
类型: 主要按钮
文本: "+ 新建项目"
尺寸: 120px × 40px
背景: 主色
文字: 白色，14px，Medium
圆角: 8px
交互: 点击创建新项目
```

#### 项目列表区域

**列表布局**（网格布局）:
```
┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐
│ 项目卡片1  │  │ 项目卡片2  │  │ 项目卡片3  │  │ 项目卡片4  │
└───────────┘  └───────────┘  └───────────┘  └───────────┘

┌───────────┐  ┌───────────┐  ┌───────────┐  ┌───────────┐
│ 项目卡片5  │  │ 项目卡片6  │  │ 项目卡片7  │  │ 项目卡片8  │
└───────────┘  └───────────┘  └───────────┘  └───────────┘
```

网格规范:
```css
显示: Grid布局
列数: 4列（桌面端）
间距: 24px（行列间距）
响应式:
  - 平板: 3列
  - 移动: 1列
```

---

### 4. 项目卡片组件

#### 卡片结构
```
┌─────────────────────────────────────┐
│                                     │
│        项目缩略图/封面               │
│        (16:9比例)                    │
│                                     │
├─────────────────────────────────────┤
│ 新建项目2025-10-24_13:21             │
│ 最后编辑: 10分钟前                    │
│                                     │
│ [编辑] [复制] [删除]                  │
└─────────────────────────────────────┘
```

#### 尺寸规范
```
卡片宽度: 280px
卡片高度: 自适应
缩略图高度: 158px（16:9比例）
内容区内边距: 16px
```

#### 组件元素

**缩略图区域**:
```
尺寸: 280px × 158px
背景: #F2F4F7（无缩略图时）
占位图: PlaceholderImg.jpg
圆角: 8px 8px 0 0
覆盖层: 悬停时显示遮罩
```

悬停遮罩:
```
背景: rgba(0,0,0,0.4)
内容: 
  [▶ 预览] 按钮（居中）
  按钮尺寸: 80px × 32px
  按钮样式: 白色背景，半透明
```

**项目标题**:
```
文本: 项目名称（如"新建项目2025-10-24_13:21"）
字号: 16px
字重: Medium
颜色: #1A1A1A
最大行数: 1行
溢出: 省略号
```

**最后编辑时间**:
```
文本格式: "最后编辑: {相对时间}"
字号: 12px
字重: Regular
颜色: #667085
示例: 
  - "10分钟前"
  - "2小时前"
  - "昨天"
  - "2天前"
```

**操作按钮组**:

布局:
```
[编辑] [复制] [删除]
水平排列，间距8px
```

按钮样式:
```
类型: 文本按钮
字号: 12px
颜色: #667085
悬停: 变为主色（编辑、复制）/ #F04438（删除）
```

功能:
- **编辑**: 跳转到项目编辑页面
- **复制**: 复制项目并创建副本
- **删除**: 打开确认删除弹窗

#### 卡片状态

**默认状态**:
```css
背景: #FFFFFF
边框: 1px solid #E4E7EC
圆角: 8px
阴影: 0 1px 3px rgba(0,0,0,0.1)
```

**悬停状态**:
```css
阴影: 0 4px 12px rgba(0,0,0,0.15)
变换: translateY(-2px)
过渡: 200ms ease
```

**选中状态**（多选模式）:
```css
边框: 2px solid 主色
背景: #F0F5FF
```

---

### 5. 空状态设计

当用户没有项目时:

```
┌─────────────────────────────────────────────────┐
│                                                 │
│                    📋                           │
│                                                 │
│              还没有任何项目                      │
│        点击"新建项目"开始您的创作之旅             │
│                                                 │
│            [+ 新建项目] 按钮                     │
│                                                 │
└─────────────────────────────────────────────────┘
```

样式:
```
居中显示
图标尺寸: 64px
标题字号: 18px，颜色#344054
描述字号: 14px，颜色#667085
```

---

### 6. 分页组件

#### 布局
```
┌─────────────────────────────────────────────┐
│ 显示 1-20 条，共 156 条      [<] 1 2 3 ... 8 [>] │
└─────────────────────────────────────────────┘
```

#### 组件元素

**页码按钮**:
```css
尺寸: 32px × 32px
字号: 14px
圆角: 4px

默认状态:
  背景: transparent
  文字: #667085
  
当前页:
  背景: 主色
  文字: #FFFFFF
  
悬停:
  背景: #F9FAFB
```

**上一页/下一页按钮**:
```
图标: 左右箭头
禁用时: 颜色#D0D5DD，不可点击
```

---

## 页面交互流程

### 创建项目流程
```
1. 点击"新建项目"按钮
2. 打开项目创建弹窗
3. 输入项目名称（可选）
4. 选择项目类型/模板（可选）
5. 点击"创建"
6. 跳转到项目编辑页面
```

### 编辑项目流程
```
1. 点击项目卡片或"编辑"按钮
2. 跳转到 /dashboard/{projectId}/tableView
3. 进入故事板编辑器
```

### 删除项目流程
```
1. 点击"删除"按钮
2. 弹出确认对话框:
   "确定要删除项目"{项目名称}"吗？此操作无法撤销。"
   [取消] [确认删除]
3. 确认后发送删除请求
4. 更新项目列表
5. 显示成功提示: "项目已删除"
```

---

## API端点

### 获取项目列表
```
端点: GET /api/storyboard/project/list
参数:
  pageNum: 1
  pageSize: 20
  keyword: "" (搜索关键词)
  
响应:
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": "f6d162c030ddc58947585ce3925a8813",
        "name": "新建项目2025-10-24_13:21",
        "coverUrl": "...",
        "updateTime": "2025-10-24T13:21:00Z"
      }
    ],
    "total": 156
  }
}
```

### 创建项目
```
端点: POST /api/storyboard/project/create
请求体:
{
  "name": "我的新项目",
  "templateId": "" (可选)
}
```

### 删除项目
```
端点: DELETE /api/storyboard/project/{projectId}
```

---

## 数据埋点

### 页面浏览
```javascript
Amplitude.track('[Amplitude] Page Viewed', {
  page: 'dashboard',
  user_id: 123696
})
```

### 关键操作
1. **创建项目**:
   ```javascript
   event: 'project_created'
   properties: {
     template_used: true/false,
     creation_method: 'blank' / 'template'
   }
   ```

2. **编辑项目**:
   ```javascript
   event: 'project_opened'
   properties: {
     project_id: 'f6d162c...',
     edit_mode: 'tableView'
   }
   ```

3. **删除项目**:
   ```javascript
   event: 'project_deleted'
   properties: {
     project_id: 'f6d162c...',
     project_age_days: 5
   }
   ```

---

## 性能优化

### 加载策略
1. **骨架屏**: 首次加载显示项目卡片骨架
2. **分页加载**: 一次最多加载20个项目
3. **图片懒加载**: 缩略图滚动到视口时才加载
4. **虚拟滚动**: 项目超过100个时使用虚拟列表

### 缓存策略
```javascript
LocalStorage缓存:
  - 项目列表（5分钟过期）
  - 用户信息（30分钟过期）
  
IndexedDB缓存:
  - 项目缩略图
  - 模板数据
```

---

## 响应式设计

### 桌面端（>1024px）
- 4列网格布局
- 侧边栏固定显示

### 平板端（768-1024px）
- 3列网格布局
- 侧边栏可折叠

### 移动端（<768px）
- 1列布局
- 侧边栏变为抽屉式
- 顶部增加汉堡菜单按钮

---

## 快捷键

```
Ctrl+N / Cmd+N  : 新建项目
Ctrl+F / Cmd+F  : 聚焦搜索框
Delete          : 删除选中项目（多选模式）
Esc             : 取消操作/关闭弹窗
```

---

## 相关页面
- [首页](./01-首页.md)
- [故事板编辑器](./03-故事板编辑器.md)
- [模板库](./04-模板库.md)
- [收益统计](./05-收益统计.md)
