# 模板库页面

## 页面标识
- **页面名称**: Template Library / 模板库
- **URL路径**: `/dashboard/templates`
- **页面类型**: 资源浏览页
- **访问权限**: 需要登录

---

## 页面目标
1. 展示专业故事板模板
2. 提供快速启动项目的方案
3. 激发创作灵感
4. 降低创作门槛

---

## 布局结构

### 整体布局
```
┌─────────────────────────────────────────────────────────────┐
│                      顶部导航栏                              │
├───────────┬─────────────────────────────────────────────────┤
│           │  分类筛选栏                                      │
│  侧边栏   ├─────────────────────────────────────────────────┤
│           │                                                 │
│           │         模板卡片网格区域                         │
│           │                                                 │
└───────────┴─────────────────────────────────────────────────┘
```

---

## 组件详细设计

### 1. 分类筛选栏

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│ [全部] [产品宣传] [教育培训] [短视频] [广告营销] [故事叙事]    │
│                                                             │
│ 排序: [最新] [最热] [使用最多]              [🔍 搜索模板...]   │
└─────────────────────────────────────────────────────────────┘
```

#### 分类标签

**标签样式**:
```css
类型: 可选择标签
高度: 32px
内边距: 8px 16px
圆角: 16px
字号: 14px

默认状态:
  背景: #F2F4F7
  文字: #344054
  
选中状态:
  背景: 主色
  文字: #FFFFFF
  
悬停状态:
  背景: #E4E7EC
```

**分类列表**:
1. 全部（默认选中）
2. 产品宣传
3. 教育培训
4. 短视频
5. 广告营销
6. 故事叙事
7. 企业介绍
8. 活动推广

**API端点**:
```
GET /api/project/template/list?categoryId={id}

categoryId映射:
  0: 全部
  1: 产品宣传
  2: 教育培训
  3: 短视频
  ...
```

#### 排序选项

**下拉选择器**:
```
┌──────────┐
│ 最新     │ ← 默认
│ 最热     │
│ 使用最多  │
└──────────┘
```

#### 搜索框
```
宽度: 280px
高度: 36px
占位符: "搜索模板..."
图标: 搜索图标（左侧）
功能: 实时搜索模板名称和描述
```

---

### 2. 模板卡片网格

#### 网格布局
```
┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐
│ 模板1   │  │ 模板2   │  │ 模板3   │  │ 模板4   │
└─────────┘  └─────────┘  └─────────┘  └─────────┘

┌─────────┐  ┌─────────┐  ┌─────────┐  ┌─────────┐
│ 模板5   │  │ 模板6   │  │ 模板7   │  │ 模板8   │
└─────────┘  └─────────┘  └─────────┘  └─────────┘
```

网格规范:
```css
列数: 4（桌面）/ 3（平板）/ 1（移动）
间距: 24px
```

---

### 3. 模板卡片组件

#### 卡片结构
```
┌─────────────────────────┐
│                         │
│     视频封面/预览        │
│     (16:9比例)          │
│                         │
├─────────────────────────┤
│ [分类标签]               │
│ 模板名称                 │
│ 简短描述                 │
│                         │
│ 👁 1.2k  💎 免费         │
│                         │
│ [预览] [使用模板]         │
└─────────────────────────┘
```

#### 尺寸规范
```
卡片宽度: 280px
卡片高度: 自适应
视频区高度: 158px
内容区内边距: 16px
```

#### 组件元素

**视频封面区域**:
```
尺寸: 280px × 158px
背景: 渐变色占位（无封面时）
视频: Cover.mp4
```

视频播放规则:
- 默认: 显示封面图
- 悬停: 自动播放预览视频
- 静音播放
- 循环播放

覆盖层:
```
位置: 绝对定位
显示条件: 悬停时
内容: 
  [▶ 预览详情] 按钮
  半透明黑色遮罩
```

**分类标签**:
```
样式: 小型标签
背景: 分类颜色
文字: 白色
字号: 12px
圆角: 4px
内边距: 4px 8px
```

分类颜色映射:
```
产品宣传: #3B82F6 (蓝色)
教育培训: #10B981 (绿色)
短视频: #F59E0B (橙色)
广告营销: #EF4444 (红色)
故事叙事: #8B5CF6 (紫色)
```

**模板名称**:
```
字号: 16px
字重: Medium
颜色: #1A1A1A
最大行数: 1行
溢出: 省略号
示例: "科技产品发布会模板"
```

**模板描述**:
```
字号: 13px
字重: Regular
颜色: #667085
行高: 1.4
最大行数: 2行
溢出: 省略号
示例: "适用于科技产品发布，包含产品展示、功能介绍、使用场景等镜头"
```

**统计信息**:
```
布局: 水平排列
间距: 16px

浏览量:
  图标: 眼睛👁
  数字: 1.2k格式
  字号: 12px
  颜色: #667085
  
价格标签:
  免费: 💎 免费 (绿色)
  付费: 💎 50钻石 (橙色)
```

**操作按钮**:

1. **预览按钮**:
   ```
   类型: 次要按钮
   文本: "预览"
   尺寸: 50% 宽度
   交互: 打开模板详情弹窗
   ```

2. **使用模板按钮**:
   ```
   类型: 主要按钮
   文本: "使用模板"
   尺寸: 50% 宽度
   交互: 基于模板创建项目
   ```

按钮布局:
```
┌──────────┬──────────┐
│  预览     │ 使用模板  │
└──────────┴──────────┘
```

#### 卡片状态

**默认**:
```css
背景: #FFFFFF
边框: 1px solid #E4E7EC
圆角: 12px
阴影: 0 1px 3px rgba(0,0,0,0.1)
```

**悬停**:
```css
阴影: 0 4px 16px rgba(0,0,0,0.12)
变换: translateY(-4px)
过渡: 250ms ease
```

---

### 4. 模板详情弹窗

#### 弹窗布局
```
┌─────────────────────────────────────────────┐
│  科技产品发布会模板                      [×] │
├─────────────────────────────────────────────┤
│  ┌───────────────────────────────────────┐  │
│  │                                       │  │
│  │        完整视频播放器                  │  │
│  │        (Video.mp4)                    │  │
│  │                                       │  │
│  └───────────────────────────────────────┘  │
│                                             │
│  📊 模板信息                                 │
│  ├─ 分类: 产品宣传                          │
│  ├─ 镜头数: 12个                            │
│  ├─ 总时长: 45秒                            │
│  ├─ 浏览量: 1,234次                         │
│  └─ 使用次数: 567次                         │
│                                             │
│  📝 模板描述                                 │
│  详细介绍模板的适用场景、特点、包含的镜头类型 │
│                                             │
│  🎬 镜头列表                                 │
│  1. 公司Logo展示 (3s)                       │
│  2. 产品全景特写 (5s)                       │
│  3. 功能演示 (8s)                           │
│  ...                                        │
│                                             │
│  [使用此模板] [关闭]                         │
└─────────────────────────────────────────────┘
```

#### 弹窗尺寸
```
宽度: 800px
最大高度: 90vh
内边距: 24px
背景: 白色
圆角: 16px
阴影: 0 8px 32px rgba(0,0,0,0.2)
```

---

### 5. 预设模板案例

#### 官方模板列表

**1. ShowcaseJmzf（产品展示）**:
```
名称: 方便面产品宣传
分类: 产品宣传
镜头数: 8
时长: 30s
特点: 产品特写 + 使用场景
```

**2. ShowcaseLYX0603（教育培训）**:
```
名称: 在线教育课程推广
分类: 教育培训
镜头数: 10
时长: 35s
特点: 讲师介绍 + 课程内容展示
```

**3. ShowcaseZyxfj（综合案例）**:
```
名称: 企业形象宣传片
分类: 企业介绍
镜头数: 15
时长: 60s
特点: 公司文化 + 团队展示 + 业务介绍
```

**4. ShowcaseXSFQG（创意短视频）**:
```
名称: 抖音快手短视频模板
分类: 短视频
镜头数: 6
时长: 15s
特点: 快节奏 + 强视觉冲击
```

---

## 交互流程

### 使用模板流程
```
1. 浏览模板库
2. 点击"预览"查看详情（可选）
3. 点击"使用模板"
4. 弹出项目命名对话框
   ┌─────────────────────┐
   │ 基于模板创建项目     │
   │                     │
   │ 项目名称:            │
   │ [输入框]            │
   │                     │
   │ [取消] [创建]        │
   └─────────────────────┘
5. 输入项目名称（可选，默认"模板名称-副本"）
6. 点击"创建"
7. 后台复制模板数据
8. 跳转到新项目编辑页面
```

### 搜索流程
```
1. 在搜索框输入关键词
2. 实时过滤模板列表
3. 搜索范围: 
   - 模板名称
   - 模板描述
   - 分类标签
4. 无结果时显示空状态
```

---

## API端点

### 获取模板列表
```
端点: GET /api/project/template/list
参数:
  categoryId: 1 (分类ID，0为全部)
  sortBy: 'latest' / 'popular' / 'most_used'
  keyword: '' (搜索关键词)
  pageNum: 1
  pageSize: 20
  
响应:
{
  "code": 200,
  "data": {
    "list": [
      {
        "id": "template_001",
        "name": "科技产品发布会模板",
        "description": "适用于科技产品发布...",
        "categoryId": 1,
        "categoryName": "产品宣传",
        "coverUrl": "static.chuangyi-keji.com/Showcase.../Cover.mp4",
        "videoUrl": "static.chuangyi-keji.com/Showcase.../Video.mp4",
        "shotCount": 12,
        "duration": 45,
        "viewCount": 1234,
        "useCount": 567,
        "price": 0,
        "createdAt": "2025-10-01T10:00:00Z"
      }
    ],
    "total": 48
  }
}
```

### 基于模板创建项目
```
端点: POST /api/storyboard/project/create_from_template
请求体:
{
  "templateId": "template_001",
  "projectName": "我的产品发布会"
}

响应:
{
  "code": 200,
  "data": {
    "projectId": "f6d162c030ddc58947585ce3925a8813"
  }
}
```

---

## 数据埋点

### 页面事件
```javascript
// 进入模板库
Amplitude.track('template_library_viewed', {
  category: 'all'
})

// 切换分类
Amplitude.track('template_category_changed', {
  from_category: 'all',
  to_category: 'product'
})

// 预览模板
Amplitude.track('template_previewed', {
  template_id: 'template_001',
  template_name: '科技产品发布会模板'
})

// 使用模板
Amplitude.track('template_used', {
  template_id: 'template_001',
  template_name: '科技产品发布会模板',
  project_id: 'f6d162c...'
})
```

---

## 空状态设计

### 无搜索结果
```
┌─────────────────────────────────────┐
│                                     │
│           🔍                        │
│      未找到匹配的模板                │
│   试试其他关键词或浏览所有模板        │
│                                     │
│       [清空搜索] [浏览全部]          │
│                                     │
└─────────────────────────────────────┘
```

### 分类无模板
```
┌─────────────────────────────────────┐
│                                     │
│           📦                        │
│    该分类暂无模板                    │
│    敬请期待更多精彩内容               │
│                                     │
└─────────────────────────────────────┘
```

---

## 性能优化

### 加载优化
1. **骨架屏**: 首次加载显示卡片骨架
2. **图片懒加载**: 滚动到视口时加载封面
3. **视频懒加载**: 悬停时才加载预览视频
4. **分页加载**: 每页20个模板

### 缓存策略
```
CDN缓存:
  - 模板封面视频
  - 模板展示视频
  
LocalStorage缓存:
  - 模板列表（10分钟过期）
  - 分类数据
```

---

## 响应式设计

### 桌面端（>1024px）
- 4列网格
- 完整功能

### 平板端（768-1024px）
- 3列网格
- 分类标签可滚动

### 移动端（<768px）
- 1列布局
- 分类变为下拉选择
- 卡片宽度100%

---

## 相关页面
- [Dashboard](./02-Dashboard.md)
- [故事板编辑器](./03-故事板编辑器.md)
