# 收益统计页面

## 页面标识
- **页面名称**: Revenue Statistics / 收益统计
- **URL路径**: `/dashboard/revenue`
- **页面类型**: 数据分析页
- **访问权限**: 需要登录
- **API端点**: `/api/storyboard/project/benefit`

---

## 页面目标
1. 展示用户项目的收益数据
2. 提供数据可视化分析
3. 跟踪项目表现
4. 激励用户创作

---

## 布局结构

### 整体布局
```
┌─────────────────────────────────────────────────────────────┐
│                      顶部导航栏                              │
├───────────┬─────────────────────────────────────────────────┤
│           │  ┌─────────────────────────────────────┐        │
│           │  │    数据概览卡片（4个）               │        │
│           │  └─────────────────────────────────────┘        │
│  侧边栏   │  ┌─────────────────────────────────────┐        │
│           │  │    收益趋势图表                      │        │
│           │  └─────────────────────────────────────┘        │
│           │  ┌─────────────────────────────────────┐        │
│           │  │    项目收益排行                      │        │
│           │  └─────────────────────────────────────┘        │
└───────────┴─────────────────────────────────────────────────┘
```

---

## 组件详细设计

### 1. 时间筛选器

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│ [今天] [本周] [本月] [本年] [自定义]         刷新于: 2分钟前    │
└─────────────────────────────────────────────────────────────┘
```

#### 时间选项

**快捷选项按钮**:
```css
类型: 单选按钮组
高度: 36px
内边距: 8px 16px
圆角: 8px
字号: 14px

默认:
  背景: transparent
  文字: #667085
  
选中:
  背景: 主色
  文字: #FFFFFF
```

选项列表:
- 今天
- 本周（周一到今天）
- 本月（本月1日到今天）
- 本年（本年1月1日到今天）
- 自定义（打开日期范围选择器）

**自定义日期选择器**:
```
┌─────────────────────┐
│ 开始日期:            │
│ [2025-10-01]        │
│                     │
│ 结束日期:            │
│ [2025-10-24]        │
│                     │
│ [取消] [确定]        │
└─────────────────────┘
```

---

### 2. 数据概览卡片

#### 4卡片布局
```
┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐
│ 总收益      │  │ 项目数      │  │ 总浏览量    │  │ 转化率      │
└─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘
```

#### 卡片结构
```
┌─────────────────────────┐
│ [图标]    指标名称        │
│                         │
│      1,234.56           │ ← 主数值
│                         │
│ ↑ +15.2% 较上期          │ ← 增长率
└─────────────────────────┘
```

#### 卡片样式
```css
宽度: 25%（4等分）
高度: 120px
背景: #FFFFFF
边框: 1px solid #E4E7EC
圆角: 12px
内边距: 20px
阴影: 0 1px 3px rgba(0,0,0,0.1)
```

#### 卡片详细设计

**卡片1: 总收益**
```
图标: 💎 钻石
指标名称: "总收益"
主数值: "1,234.56 钻石"
数值样式:
  字号: 32px
  字重: Bold
  颜色: #1A1A1A
增长率: "+15.2% 较上期"
  颜色: #10B981 (正增长) / #F04438 (负增长)
```

**卡片2: 项目数**
```
图标: 📁 文件夹
指标名称: "项目数"
主数值: "42 个"
增长率: "+3 较上期"
```

**卡片3: 总浏览量**
```
图标: 👁 眼睛
指标名称: "总浏览量"
主数值: "8,945 次"
增长率: "+28.5% 较上期"
```

**卡片4: 转化率**
```
图标: 📊 图表
指标名称: "转化率"
主数值: "12.8%"
增长率: "+2.3% 较上期"
说明: "浏览转为使用的比率"
```

---

### 3. 收益趋势图表

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│  收益趋势                              [折线图] [柱状图]      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│    150┤                                    ●               │
│       │                               ●                    │
│    100┤                          ●                         │
│       │                     ●                              │
│     50┤                ●                                   │
│       │           ●                                        │
│      0└────────────────────────────────────────────────    │
│        10/18  10/19  10/20  10/21  10/22  10/23  10/24    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 图表配置

**图表类型**:
- 折线图（默认）
- 柱状图
- 面积图

**数据系列**:
```
主轴（Y轴左）: 收益金额（钻石）
副轴（Y轴右）: 浏览量（次）
横轴（X轴）: 日期

系列1: 每日收益
  颜色: 主色
  线宽: 2px
  数据点: 圆形，8px

系列2: 每日浏览（可选显示）
  颜色: #F59E0B
  线宽: 2px
  虚线样式
```

**交互功能**:
1. **悬停提示**:
   ```
   ┌─────────────────┐
   │ 10月24日         │
   │ 收益: 156钻石    │
   │ 浏览: 234次      │
   └─────────────────┘
   ```

2. **缩放**: 鼠标滚轮缩放
3. **平移**: 拖拽平移
4. **数据点点击**: 查看该日详情

---

### 4. 项目收益排行

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│  项目收益排行 TOP 10                      [查看全部]          │
├────┬──────────────────────┬──────────┬──────────┬──────────┤
│ #  │  项目名称             │ 浏览量    │ 使用次数  │ 收益     │
├────┼──────────────────────┼──────────┼──────────┼──────────┤
│ 1  │ 🥇 科技产品发布会     │ 1,234    │ 567      │ 245.8💎  │
├────┼──────────────────────┼──────────┼──────────┼──────────┤
│ 2  │ 🥈 教育课程推广       │ 1,089    │ 432      │ 189.6💎  │
├────┼──────────────────────┼──────────┼──────────┼──────────┤
│ 3  │ 🥉 企业形象宣传       │ 945      │ 398      │ 167.2💎  │
├────┼──────────────────────┼──────────┼──────────┼──────────┤
│ 4  │    短视频创意模板     │ 823      │ 301      │ 134.5💎  │
├────┼──────────────────────┼──────────┼──────────┼──────────┤
│... │    ...               │ ...      │ ...      │ ...      │
└────┴──────────────────────┴──────────┴──────────┴──────────┘
```

#### 表格样式

**表头**:
```css
背景: #F9FAFB
高度: 48px
字号: 14px
字重: Medium
颜色: #667085
```

**表格行**:
```css
高度: 56px
边框底部: 1px solid #F2F4F7
悬停: 背景#F9FAFB
```

**排名列**:
```
宽度: 60px
对齐: 居中
前三名特殊标记:
  1: 🥇 金色
  2: 🥈 银色
  3: 🥉 铜色
```

**项目名称列**:
```
宽度: flex-1
字号: 14px
颜色: #1A1A1A
可点击: 跳转到项目详情
```

**数值列**（浏览量、使用次数、收益）:
```
宽度: 120px
对齐: 右对齐
字号: 14px
字重: Medium
```

---

### 5. 收益明细列表

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│  收益明细                                   [导出Excel]       │
├──────────┬──────────────────┬──────────┬──────────┬─────────┤
│ 日期     │  项目名称         │ 类型     │ 金额     │ 状态    │
├──────────┼──────────────────┼──────────┼──────────┼─────────┤
│10/24 14:23│ 科技产品发布会   │ 使用收益  │ +15.6💎  │ 已结算  │
├──────────┼──────────────────┼──────────┼──────────┼─────────┤
│10/24 11:45│ 教育课程推广     │ 浏览奖励  │ +2.3💎   │ 已结算  │
├──────────┼──────────────────┼──────────┼──────────┼─────────┤
│10/23 16:32│ 企业形象宣传     │ 使用收益  │ +18.9💎  │ 已结算  │
├──────────┼──────────────────┼──────────┼──────────┼─────────┤
│10/23 09:15│ 短视频创意模板   │ 分享奖励  │ +5.0💎   │ 待结算  │
├──────────┼──────────────────┼──────────┼──────────┼─────────┤
│...       │ ...              │ ...      │ ...      │ ...     │
└──────────┴──────────────────┴──────────┴──────────┴─────────┘
```

#### 收益类型

**类型标签**:
```
使用收益:
  颜色: #10B981 (绿色)
  说明: 他人使用你的项目/模板
  
浏览奖励:
  颜色: #3B82F6 (蓝色)
  说明: 项目被浏览产生的奖励
  
分享奖励:
  颜色: #F59E0B (橙色)
  说明: 分享到社交平台的奖励
  
创作激励:
  颜色: #8B5CF6 (紫色)
  说明: 平台创作激励计划
```

#### 状态标签
```
已结算: 
  颜色: #10B981
  图标: ✓
  
待结算:
  颜色: #F59E0B
  图标: ⏱
  说明: "预计3个工作日到账"
  
处理中:
  颜色: #667085
  图标: ⟳
```

---

## 数据计算规则

### 收益计算公式

**使用收益**:
```
收益 = 使用次数 × 单价 × 质量系数

单价: 根据项目类型
  - 基础模板: 0.3钻石/次
  - 高级模板: 0.5钻石/次
  - 专业模板: 1.0钻石/次
  
质量系数: 0.5 - 2.0
  基于: 用户评分、完成度、使用时长
```

**浏览奖励**:
```
奖励 = 浏览量 × 0.01钻石

上限: 每个项目每日最多10钻石浏览奖励
```

**分享奖励**:
```
分享到社交平台: 5钻石/次
有效分享（产生点击）: 额外10钻石
```

---

## API端点

### 获取收益数据
```
端点: GET /api/storyboard/project/benefit
参数:
  startDate: "2025-10-01"
  endDate: "2025-10-24"
  projectId: "" (可选，特定项目)
  
响应:
{
  "code": 200,
  "data": {
    "summary": {
      "totalRevenue": 1234.56,
      "totalProjects": 42,
      "totalViews": 8945,
      "conversionRate": 12.8,
      "compared": {
        "revenue": 15.2,
        "projects": 7.1,
        "views": 28.5,
        "conversionRate": 2.3
      }
    },
    "trend": [
      {
        "date": "2025-10-24",
        "revenue": 156.8,
        "views": 234,
        "uses": 45
      }
    ],
    "topProjects": [
      {
        "projectId": "f6d162c...",
        "projectName": "科技产品发布会",
        "views": 1234,
        "uses": 567,
        "revenue": 245.8
      }
    ],
    "details": [
      {
        "id": "trans_001",
        "date": "2025-10-24T14:23:00Z",
        "projectName": "科技产品发布会",
        "type": "use",
        "amount": 15.6,
        "status": "settled"
      }
    ]
  }
}
```

### 导出收益报表
```
端点: GET /api/storyboard/project/benefit/export
参数: 同上
响应: Excel文件下载
```

---

## 数据埋点

```javascript
// 查看收益统计
Amplitude.track('revenue_page_viewed', {
  date_range: 'this_month',
  total_revenue: 1234.56
})

// 切换时间范围
Amplitude.track('revenue_date_range_changed', {
  from: 'this_week',
  to: 'this_month'
})

// 导出报表
Amplitude.track('revenue_report_exported', {
  format: 'excel',
  date_range: 'this_month'
})

// 查看项目详情
Amplitude.track('revenue_project_detail_viewed', {
  project_id: 'f6d162c...',
  project_name: '科技产品发布会'
})
```

---

## 空状态设计

### 无收益数据
```
┌─────────────────────────────────────┐
│                                     │
│           💰                        │
│      暂无收益数据                    │
│   创建更多项目开始赚取钻石            │
│                                     │
│     [创建项目] [浏览模板]            │
│                                     │
└─────────────────────────────────────┘
```

### 选定时间段无数据
```
┌─────────────────────────────────────┐
│                                     │
│           📊                        │
│    该时间段暂无收益                  │
│   试试选择其他时间范围                │
│                                     │
└─────────────────────────────────────┘
```

---

## 提现功能（预留）

### 提现入口
```
位置: 总收益卡片右上角
按钮: "提现"
条件: 余额 ≥ 100钻石
```

### 提现流程
```
1. 点击"提现"按钮
2. 弹出提现对话框
3. 选择提现方式:
   - 微信零钱
   - 支付宝
   - 兑换优惠券
4. 输入提现金额
5. 确认提现
6. 等待审核（1-3个工作日）
```

---

## 性能优化

### 数据缓存
```
缓存策略:
  - 概览数据: 5分钟
  - 趋势数据: 10分钟
  - 明细数据: 实时（不缓存）
```

### 图表渲染
```
使用: ECharts / Chart.js
优化:
  - 数据点超过100时采样
  - Canvas渲染
  - 按需加载图表库
```

---

## 响应式设计

### 桌面端（>1024px）
- 4卡片横向排列
- 完整图表展示

### 平板端（768-1024px）
- 2×2卡片网格
- 图表适配宽度

### 移动端（<768px）
- 卡片纵向堆叠
- 图表简化显示
- 表格横向滚动

---

## 相关页面
- [Dashboard](./02-Dashboard.md)
- [个人设置](./09-个人设置.md)
