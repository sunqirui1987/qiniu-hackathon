# 个人设置页面

## 页面标识
- **页面名称**: User Settings / 个人设置
- **URL路径**: `/dashboard/settings`
- **页面类型**: 用户管理页
- **访问权限**: 需要登录

---

## 页面目标
1. 管理个人账户信息
2. 配置系统偏好设置
3. 查看账户安全
4. 管理通知设置

---

## 布局结构

### 整体布局
```
┌─────────────────────────────────────────────────────────────┐
│                      顶部导航栏                              │
├───────────┬─────────────────────────────────────────────────┤
│           │  设置面包屑导航                                  │
│           ├─────────────────────────────────────────────────┤
│           │                                                 │
│  侧边栏   │            设置内容区域                          │
│  设置菜单 │                                                 │
│           │                                                 │
└───────────┴─────────────────────────────────────────────────┘
```

---

## 组件详细设计

### 1. 侧边设置菜单

#### 菜单布局
```
┌───────────────┐
│ 个人资料      │ ← 选中
│ 账户安全      │
│ 通知设置      │
│ 隐私设置      │
│ 外观偏好      │
│ 关于         │
└───────────────┘
```

#### 菜单样式
```css
宽度: 200px
内边距: 16px 0

菜单项:
  高度: 44px
  内边距: 12px 20px
  字号: 14px
  圆角: 8px
  
默认:
  背景: transparent
  文字: #667085
  
悬停:
  背景: #F9FAFB
  文字: #344054
  
选中:
  背景: #F0F5FF
  文字: 主色
  字重: Medium
```

---

### 2. 个人资料设置

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│ 个人资料                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 头像                                                         │
│ ┌─────────┐                                                 │
│ │         │  [更换头像] [移除头像]                           │
│ │  头像   │                                                 │
│ │         │  支持JPG、PNG格式，不超过2MB                     │
│ └─────────┘                                                 │
│                                                             │
│ 用户名                                                       │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ [输入框]                                             │     │
│ └─────────────────────────────────────────────────────┘     │
│ 用户名将显示在您的项目和模板中                                │
│                                                             │
│ 手机号                                                       │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ 138****8000                                [更换]    │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│ 邮箱（可选）                                                 │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ [输入框]                                    [验证]    │     │
│ └─────────────────────────────────────────────────────┘     │
│ 用于接收重要通知和找回密码                                    │
│                                                             │
│ 个人简介                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │                                                     │     │
│ │ [多行文本框]                                         │     │
│ │                                                     │     │
│ └─────────────────────────────────────────────────────┘     │
│ 0/200字                                                      │
│                                                             │
│              [取消] [保存更改]                               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 头像上传

**上传交互**:
```
点击"更换头像":
  1. 打开文件选择器
  2. 选择图片文件
  3. 图片预览和裁剪:
     ┌─────────────────────────┐
     │ 调整头像                 │
     ├─────────────────────────┤
     │                         │
     │   [图片裁剪工具]         │
     │   - 拖动调整位置         │
     │   - 缩放调整大小         │
     │   - 旋转图片            │
     │                         │
     │   [取消] [确定]         │
     └─────────────────────────┘
  4. 上传到服务器
  5. 更新头像显示
```

**验证规则**:
```
格式: JPG, PNG, WebP
大小: ≤ 2MB
尺寸: 建议 400×400px
比例: 1:1（正方形）
```

---

### 3. 账户安全设置

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│ 账户安全                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 登录密码                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ ●●●●●●●●                                    [修改]    │     │
│ └─────────────────────────────────────────────────────┘     │
│ 最后修改: 2025-10-20                                         │
│                                                             │
│ 绑定手机                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ 138****8000                                [更换]    │     │
│ └─────────────────────────────────────────────────────┘     │
│ 用于登录和安全验证                                           │
│                                                             │
│ 绑定邮箱                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ 未绑定                                      [绑定]    │     │
│ └─────────────────────────────────────────────────────┘     │
│ 用于找回密码和接收通知                                        │
│                                                             │
│ 微信绑定                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ [微信图标] 已绑定                          [解绑]    │     │
│ └─────────────────────────────────────────────────────┘     │
│ 可使用微信快速登录                                           │
│                                                             │
│ 登录设备                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ 🖥️ MacBook Pro                                      │     │
│ │ Chrome 140 · macOS                         [当前设备] │     │
│ │ 最后活动: 刚刚 · IP: 123.45.67.89                     │     │
│ ├─────────────────────────────────────────────────────┤     │
│ │ 📱 iPhone 15                               [移除]    │     │
│ │ Safari · iOS 17                                     │     │
│ │ 最后活动: 2小时前 · IP: 123.45.67.90                  │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│ [移除所有其他设备]                                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 修改密码弹窗
```
┌─────────────────────────────────┐
│ 修改登录密码                  [×] │
├─────────────────────────────────┤
│                                 │
│ 当前密码:                        │
│ ┌─────────────────────────────┐ │
│ │ [密码输入框]                 │ │
│ └─────────────────────────────┘ │
│                                 │
│ 新密码:                          │
│ ┌─────────────────────────────┐ │
│ │ [密码输入框]                 │ │
│ └─────────────────────────────┘ │
│ 密码强度: ━━━━━━━━━━━━          │
│           弱  中  强             │
│                                 │
│ 确认新密码:                      │
│ ┌─────────────────────────────┐ │
│ │ [密码输入框]                 │ │
│ └─────────────────────────────┘ │
│                                 │
│      [取消] [确认修改]           │
│                                 │
└─────────────────────────────────┘
```

---

### 4. 通知设置

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│ 通知设置                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 系统通知                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ ☑ 浏览器推送通知                                     │     │
│ │   在浏览器中接收重要通知                              │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│ 邮件通知                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ ☑ 项目相关                                          │     │
│ │   项目完成、导出成功等                                │     │
│ │                                                     │     │
│ │ ☑ 收益通知                                          │     │
│ │   收益到账、提现成功等                                │     │
│ │                                                     │     │
│ │ ☑ 账户安全                                          │     │
│ │   登录提醒、密码修改等                                │     │
│ │                                                     │     │
│ │ ☐ 营销推广                                          │     │
│ │   新功能介绍、活动通知等                              │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│ 消息提醒频率                                                 │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ ○ 实时提醒                                          │     │
│ │ ● 每日摘要（推荐）                                   │     │
│ │ ○ 每周摘要                                          │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│              [保存设置]                                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

### 5. 隐私设置

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│ 隐私设置                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 项目隐私                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ 默认项目可见性:                                      │     │
│ │ ○ 公开 - 所有人可见和使用                            │     │
│ │ ● 仅自己可见（推荐）                                 │     │
│ │ ○ 指定用户可见                                      │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│ 个人主页                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ ☑ 允许他人访问我的主页                               │     │
│ │ ☑ 展示我的公开项目                                   │     │
│ │ ☐ 展示我的收益统计                                   │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│ 数据分析                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ ☑ 允许收集使用数据以改进服务                          │     │
│ │ ☐ 参与用户体验研究                                   │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│ 账户管理                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ [导出我的数据]                                       │     │
│ │ 导出您的所有项目和账户数据                            │     │
│ │                                                     │     │
│ │ [删除我的账户]                                       │     │
│ │ 永久删除账户及所有数据（不可恢复）                     │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

#### 删除账户确认
```
┌─────────────────────────────────┐
│ 确认删除账户                  [×] │
├─────────────────────────────────┤
│                                 │
│ ⚠️ 警告                         │
│                                 │
│ 此操作将永久删除您的账户，包括:   │
│ • 所有项目和模板                 │
│ • 账户余额（请先提现）            │
│ • 个人资料和设置                 │
│ • 收益记录                      │
│                                 │
│ 此操作不可撤销！                 │
│                                 │
│ 请输入您的手机号以确认:          │
│ ┌─────────────────────────────┐ │
│ │ [输入框]                     │ │
│ └─────────────────────────────┘ │
│                                 │
│ 我理解删除后数据无法恢复          │
│ ☐ 我确认要删除我的账户           │
│                                 │
│      [取消] [确认删除]           │
│                                 │
└─────────────────────────────────┘
```

---

### 6. 外观偏好

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│ 外观偏好                                                     │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│ 主题                                                         │
│ ┌────────┐  ┌────────┐  ┌────────┐                         │
│ │ ☀️     │  │ 🌙     │  │ 🔄     │                         │
│ │ 浅色   │  │ 深色   │  │ 自动   │ ← 选中                   │
│ └────────┘  └────────┘  └────────┘                         │
│                                                             │
│ 语言                                                         │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ [简体中文 ▼]                                         │     │
│ └─────────────────────────────────────────────────────┘     │
│ 可选: 简体中文、繁体中文、English                             │
│                                                             │
│ 字体大小                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ 小 ━━━●━━━━━━ 大                                    │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│ 紧凑模式                                                     │
│ ┌─────────────────────────────────────────────────────┐     │
│ │ ☑ 启用紧凑模式                                       │     │
│ │   减少界面间距，显示更多内容                          │     │
│ └─────────────────────────────────────────────────────┘     │
│                                                             │
│              [保存设置]                                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

### 7. 关于页面

#### 布局
```
┌─────────────────────────────────────────────────────────────┐
│ 关于                                                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│       [Logo OneStory]                                       │
│                                                             │
│ OneStory v1.0.2                                             │
│ AI驱动的视频故事板创作平台                                    │
│                                                             │
│ ──────────────────────────────────────                      │
│                                                             │
│ 产品信息                                                     │
│ • 版本号: 1.0.2                                             │
│ • 更新日期: 2025-10-24                                      │
│ • 构建号: 20251024-001                                      │
│                                                             │
│ 帮助与支持                                                   │
│ • [使用文档]                                                │
│ • [常见问题]                                                │
│ • [联系客服]                                                │
│ • [意见反馈]                                                │
│                                                             │
│ 法律信息                                                     │
│ • [用户协议]                                                │
│ • [隐私政策]                                                │
│ • [版权声明]                                                │
│                                                             │
│ 关注我们                                                     │
│ [TikTok] [Bilibili] [微信公众号]                            │
│                                                             │
│ © 2025 OneStory. All rights reserved.                      │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 交互流程

### 保存设置流程
```
1. 用户修改设置
2. 点击"保存更改"按钮
3. 验证输入数据
4. 发送API请求
5. 显示保存状态:
   - 保存中: 按钮显示加载图标
   - 成功: 显示"✓ 保存成功"提示
   - 失败: 显示错误信息
6. 3秒后提示自动消失
```

### 更换手机号流程
```
1. 点击"更换"按钮
2. 弹出验证弹窗:
   ┌─────────────────────────────────┐
   │ 更换手机号                    [×] │
   ├─────────────────────────────────┤
   │ 步骤1: 验证当前手机号            │
   │ 138****8000                     │
   │ [获取验证码]                     │
   │                                 │
   │ 步骤2: 绑定新手机号              │
   │ [新手机号输入]                   │
   │ [获取验证码]                     │
   │                                 │
   │      [取消] [确认更换]           │
   └─────────────────────────────────┘
3. 完成验证和绑定
4. 更新显示
```

---

## API端点

### 获取用户设置
```
端点: GET /api/user/settings

响应:
{
  "code": 200,
  "data": {
    "profile": {
      "avatar": "...",
      "username": "...",
      "phone": "138****8000",
      "email": "...",
      "bio": "..."
    },
    "security": {...},
    "notification": {...},
    "privacy": {...},
    "appearance": {...}
  }
}
```

### 更新用户设置
```
端点: PUT /api/user/settings
请求体:
{
  "profile": {
    "username": "新用户名",
    "bio": "..."
  }
}
```

### 上传头像
```
端点: POST /api/user/avatar
请求体: FormData (multipart/form-data)
  - file: 图片文件

响应:
{
  "code": 200,
  "data": {
    "avatarUrl": "..."
  }
}
```

---

## 数据埋点

```javascript
// 访问设置页
Amplitude.track('settings_page_viewed', {
  section: 'profile'
})

// 修改设置
Amplitude.track('settings_changed', {
  section: 'notification',
  setting: 'email_notification',
  value: true
})

// 上传头像
Amplitude.track('avatar_uploaded', {
  file_size: 512000,
  format: 'jpg'
})

// 切换主题
Amplitude.track('theme_changed', {
  from: 'light',
  to: 'dark'
})
```

---

## 验证规则

### 用户名
```
长度: 2-20个字符
允许: 中文、字母、数字、下划线
禁止: 特殊字符、空格
唯一性: 全平台唯一
```

### 邮箱
```
格式: 标准邮箱格式
验证: 发送验证邮件
```

### 简介
```
最大长度: 200字符
允许: 所有字符
过滤: 敏感词
```

---

## 响应式设计

### 桌面端（>1024px）
- 侧边栏固定
- 内容区最大宽度800px

### 平板端（768-1024px）
- 侧边栏可折叠
- 内容区自适应

### 移动端（<768px）
- 侧边栏变为顶部Tab
- 表单100%宽度
- 优化输入体验

---

## 相关页面
- [Dashboard](./02-Dashboard.md)
- [登录注册](./08-登录注册.md)
