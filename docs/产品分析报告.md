# OneStory 产品分析报告

## 一、产品概述

### 1.1 产品简介
OneStory (onestory.art) 是一个AI驱动的视频故事板创作平台,专注于为创作者提供智能化的视频分镜创作工具。

### 1.2 产品定位
- **目标用户**: 视频创作者、影视制作团队、广告策划人员、短视频创作者
- **核心价值**: 通过AI技术简化视频分镜制作流程,提供从文本到图像的一站式创作解决方案
- **产品类型**: SaaS平台 - 基于Web的云端创作工具

### 1.3 访问信息
- **网站地址**: https://onestory.art
- **主要页面**: 
  - 首页/登录页
  - Dashboard (控制台)
  - Storyboard项目编辑器 (tableView模式)

---

## 二、核心功能分析

### 2.1 用户认证与账户系统
**功能描述**:
- JWT Token认证机制
- 微信登录集成(通过open.weixin.qq.com引流)
- 用户信息管理(/api/user/info)
- 阿里云验证码集成(AliyunCaptcha)

**技术实现**:
```
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...
用户ID: 123696
```

### 2.2 项目管理系统
**功能模块**:
1. **项目列表**
   - 端点: `/api/storyboard/project/list`
   - 支持分页: pageSize=20, pageNum=1
   - 项目创建日期显示(如: "新建项目2025-10-24_13:21")

2. **项目详情**
   - 端点: `/api/storyboard/project?id={projectId}`
   - 项目ID示例: f6d162c030ddc58947585ce3925a8813

3. **项目收益统计**
   - 端点: `/api/storyboard/project/benefit`

### 2.3 AI图像生成功能 (核心)
**文字转图像 (Text-to-Image)**:
- **端点**: `/api/storyboard/batch_txt2img`
- **功能**: 批量将文本描述转换为故事板图像
- **图像存储**: 阿里云OSS
  - 路径示例: `static.chuangyi-keji.com/generate_storyboard_images/`
  - 支持图像质量优化: `?x-oss-process=image/quality,q_50/resize,w_300`

**镜头管理 (Shot Management)**:
- **端点**: `/api/storyboard/fetch_shot`
- **功能**: 获取和管理视频分镜信息
- **请求体**: `{"projectId":"f6d162c030ddc58947585ce3925a8813"}`

### 2.4 模板系统
**功能描述**:
- **端点**: `/api/project/template/list?categoryId=1`
- **展示案例**:
  - ShowcaseJmzf (今麦郎方便?)
  - ShowcaseLYX0603
  - ShowcaseZyxfj 
  - ShowcaseXSFQG

每个案例都包含:
- 封面视频 (Cover.mp4)
- 展示视频 (Video.mp4)

### 2.5 视频播放与编辑
**视频文件处理**:
- **转换视频存储**: `converted_videos/1761283524_xK2zQZ_original.mp4`
- **支持分段加载**: Range requests (bytes=0-, bytes=32768-, bytes=65536-)
- **跨域视频访问**: 从static.chuangyi-keji.com加载

**视频播放器组件**:
- 前端资源: `/assets/FilePlayer-DesqfbSt.js`
- SVG图标: 播放、暂停、音量、全屏控制

### 2.6 消息通知系统
**功能端点**:
- `/api/user/message/unread` - 未读消息
- `/api/user/message/popup` - 弹窗消息

### 2.7 表格视图编辑器
**专用组件**:
- `MainRoleCell` - 主角色单元格
- `SelectCell` - 选择单元格  
- `DurationCell` - 时长单元格

这些组件支持在tableView模式下编辑故事板的各个属性。

---

## 三、技术架构分析

### 3.1 前端技术栈
**框架与库**:
- 现代化单页应用 (SPA)
- 主要JavaScript文件: `/assets/index-CKrN9dCp.js`
- CSS样式: `/assets/index-BqYiNvCQ.css`
- Web Worker: `polling-Czxh5FTa.js` (用于后台轮询)

**资源管理**:
- 哈希命名的静态资源 (支持缓存优化)
- SVG图标系统
- Base64内联图片

### 3.2 后端架构
**API设计**:
- RESTful API架构
- 域名: `onestory.art/api/`
- 主要模块:
  - `/user/*` - 用户相关
  - `/storyboard/*` - 故事板相关
  - `/project/*` - 项目相关

**CDN与存储**:
- 主CDN: `static.chuangyi-keji.com`
- 内容类型:
  - 视频文件 (Showcase, converted_videos)
  - 图像文件 (generate_storyboard_images, Video_List/icon)
  - 通用资源 (common/avatar.png, PlaceholderImg.jpg)

### 3.3 第三方集成
**分析与监控**:
1. **百度统计** (hm.baidu.com)
   - Site ID: 26f513fb9586da8472f4b91c21144515
   
2. **Amplitude** (数据分析)
   - API: api2.amplitude.com
   - App ID: 1449591c6ec2e4a23f2c414d3507db3e
   - 事件追踪:
     - `[Amplitude] Page Viewed`
     - `lens_show`

3. **字节跳动统计** (mcs.zijieapi.com)
   - 事件类型:
     - `image_ai_function_entrance_show`
     - `image_ask_doubao_show`
   - App ID: 586864

**验证服务**:
- 阿里云验证码: `o.alicdn.com/captcha-frontend/aliyunCaptcha/AliyunCaptcha.js`

### 3.4 浏览器兼容性
- 目标浏览器: Chrome 140.0.0.0
- 平台: macOS, Windows
- 分辨率适配: 1512x982 (及其他常见分辨率)

---

## 四、用户体验流程

### 4.1 典型用户旅程

```
1. 用户访问 → 2. 登录/注册 → 3. 进入Dashboard → 4. 创建/选择项目
                                              ↓
8. 导出/分享 ← 7. 预览视频 ← 6. AI生成图像 ← 5. 编辑故事板
```

### 4.2 详细交互流程

**步骤1: 首页与登录**
- 展示产品展示视频(Showcase)
- 提供社交媒体分享(TikTok, Bilibili图标)
- 微信扫码登录选项

**步骤2: Dashboard**
- 显示用户项目列表
- 模板库浏览(categoryId分类)
- "新建项目"快速入口
- 用户头像和积分/钻石显示(Gem Stone图标)

**步骤3: 项目编辑 (TableView模式)**
- 表格形式展示分镜列表
- 每个镜头包含:
  - 序号
  - 主角色信息
  - 场景描述
  - 时长
  - AI生成的预览图
- 实时保存功能(fetch_shot API)

**步骤4: AI生成**
- 批量文本转图像
- 进度显示(轮询机制)
- 图像质量优化预览

**步骤5: 视频预览与导出**
- 在线视频播放器
- 支持播放控制(播放/暂停/进度/音量/全屏)
- 视频文件下载

---

## 五、数据流分析

### 5.1 项目数据结构
```json
{
  "projectId": "f6d162c030ddc58947585ce3925a8813",
  "shots": [
    {
      "shotId": "...",
      "mainRole": "...",
      "description": "...",
      "duration": "...",
      "imageUrl": "static.chuangyi-keji.com/generate_storyboard_images/..."
    }
  ]
}
```

### 5.2 用户会话管理
- Session ID: 通过Amplitude SDK跟踪
- Device ID: cd892ecb-6abf-4ca0-a2b7-191d8c621a85
- JWT有效期管理

### 5.3 图像资源命名规则
```
/generate_storyboard_images/{userId}/{projectId}/{imageHash}.png
示例: /69cc9a3269148463/d2bf6b5ebb08e341/8e0015f21eee07a8c38ea3e03bc434ec.png
```

---

## 六、关键业务指标 (从API推断)

### 6.1 用户指标
- 用户注册/登录
- 活跃用户追踪(Amplitude session_id)
- 用户留存(通过message系统)

### 6.2 项目指标
- 项目创建数
- 项目完成率(benefit API)
- 模板使用率

### 6.3 AI服务指标
- Text-to-Image生成次数
- 图像生成成功率
- 批量生成平均耗时

---

## 七、竞争优势分析

### 7.1 技术优势
1. **AI驱动**: 自动化图像生成降低创作门槛
2. **云端协作**: 基于Web的访问,无需安装
3. **模板库**: 预设专业案例加速创作
4. **实时预览**: 即时查看生成效果

### 7.2 用户体验优势
1. **低学习成本**: 表格化编辑界面直观
2. **快速迭代**: 批量生成支持快速调整
3. **移动友好**: 微信登录便于移动端引流

### 7.3 商业化路径
- 会员制度(积分/钻石系统)
- 模板商城
- API调用计费
- 企业级服务

---

## 八、改进建议

### 8.1 功能层面
1. **协作功能**: 团队项目共享与评论
2. **版本管理**: 故事板历史版本对比
3. **导出格式**: 支持PDF、PPT等多格式导出
4. **AI优化**: 提供更多风格选择和参数调整

### 8.2 性能优化
1. **图像加载**: 实现懒加载和渐进式加载
2. **视频预加载**: 优化Range请求策略
3. **离线编辑**: Service Worker支持离线工作

### 8.3 用户增长
1. **社交分享**: 一键分享到社交平台
2. **作品展示**: 公开作品广场
3. **教程系统**: 新手引导和视频教程

---

## 九、总结

OneStory 是一款定位清晰的AI视频故事板创作平台,通过以下核心能力服务创作者:

✅ **AI图像生成** - 降低专业门槛  
✅ **项目化管理** - 提升创作效率  
✅ **模板系统** - 快速启动项目  
✅ **云端协作** - 随时随地访问  

产品采用现代化的技术架构,整合多个第三方服务实现完整的业务闭环。通过持续优化AI生成质量和用户体验,有潜力成为视频创作领域的重要工具。

---

**报告生成时间**: 2025-10-24  
**分析数据来源**: onestory.art 网络请求日志  
**分析深度**: 基于前端API调用的产品功能还原
